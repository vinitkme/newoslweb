(function(e,r,n,a){'use strict';var s=parseInt(n.user.uid,10),i=Math.round(new Date().getTime()/1000)-30*24*60*60,t=!1;if(n.history&&n.history.lastReadTimestamps){t=n.history.lastReadTimestamps};r.history={fetchTimestamps:function(n,i){if(t){i();return};e.ajax({url:r.url('history/get_node_read_timestamps'),type:'POST',data:{'node_ids[]':n},dataType:'json',success:function(t){for(var e in t){if(t.hasOwnProperty(e)){a.setItem('Drupal.history.'+s+'.'+e,t[e])}};i()}})},getLastRead:function(e){if(t&&t[e]){return parseInt(t[e],10)};return parseInt(a.getItem('Drupal.history.'+s+'.'+e)||0,10)},markAsRead:function(n){e.ajax({url:r.url('history/'+n+'/read'),type:'POST',dataType:'json',success:function(e){if(t&&t[n]){return};a.setItem('Drupal.history.'+s+'.'+n,e)}})},needsServerCheck:function(e,r){if(r<i){return!1};if(t&&t[e]){return r>parseInt(t[e],10)};var n=parseInt(a.getItem('Drupal.history.'+s+'.'+e)||0,10);return r>n}}})(jQuery,Drupal,drupalSettings,window.localStorage);;
(function(o,t,s){'use strict';o.addEventListener('load',function(){if(s.history&&s.history.nodesToMarkAsRead){Object.keys(s.history.nodesToMarkAsRead).forEach(t.history.markAsRead)}})})(window,Drupal,drupalSettings);;
;var disqus_shortname='',disqus_url='',disqus_title='',disqus_identifier='',disqus_disable_mobile=0,disqus_def_name='',disqus_def_email='',disqus_config;(function(s){'use strict';Drupal.disqus={};Drupal.behaviors.disqus={attach:function(u,i){if(i.disqus||!1){s('body').once('disqus').each(function(){disqus_shortname=i.disqus.domain;disqus_url=i.disqus.url;disqus_title=i.disqus.title;disqus_identifier=i.disqus.identifier;disqus_disable_mobile=i.disqus.disable_mobile||0;disqus_def_name=i.disqus.name||'';disqus_def_email=i.disqus.email||'';disqus_config=function(){if(i.disqus.language||!1){this.language=i.disqus.language};if(i.disqus.remote_auth_s3||!1){this.page.remote_auth_s3=i.disqus.remote_auth_s3};if(i.disqus.api_key||!1){this.page.api_key=i.disqus.api_key};if(i.disqus.sso||!1){this.sso=i.disqus.sso};if(i.disqus.callbacks||!1){for(var u in i.disqus.callbacks){for(var e=0;e<i.disqus.callbacks[u].length;e++){var a=i.disqus.callbacks[u][e].split('.'),s=window;for(var d=0;d<a.length;d++){s=s[a[d]]};if(typeof s==='function'){this.callbacks[u].push(s)}}}}};jQuery.ajax({type:'GET',url:'//'+disqus_shortname+'.disqus.com/embed.js',dataType:'script',cache:!1})})};if(i.disqusComments||!1){s('body').once('disqusComments').each(function(){disqus_shortname=i.disqusComments;jQuery.ajax({type:'GET',url:'//'+disqus_shortname+'.disqus.com/count.js',dataType:'script',cache:!1})})}}}})(jQuery);;
(function(i){'use strict';Drupal.behaviors.disqusSettingsForm={attach:function(e){var t=i(e);t.find('#edit-visibility').drupalSetSummary(function(t){var e=[];i('#edit-disqus-nodetypes div.form-type-checkbox').each(function(){var t=[];if(i(this).find('input').is(':checked')){t.push(Drupal.checkPlain(i(this).find('label').text()))};if(t.length){e.push(i('label[for="edit-disqus-nodetypes"]').text()+': '+t.join(', '))}});e.push(Drupal.t('Location: ')+Drupal.checkPlain(i('#edit-disqus-location').val()));e.push(Drupal.t('Weight: ')+Drupal.checkPlain(i('#edit-disqus-weight').val()));return e.join('<br />')});t.find('#edit-behavior').drupalSetSummary(function(e){var s=[];if(i('#edit-disqus-userapikey').val()){s.push(i('#edit-disqus-userapikey').parent().find('label').text())};var t=['#edit-disqus-localization','#edit-disqus-inherit-login','#edit-disqus-disable-mobile'];for(var a in t){if(i(t[a]).is(':checked')){s.push(i(t[a]).parent().find('label').text())}};return s.join(', ')});t.find('#edit-advanced').drupalSetSummary(function(e){var t=[];if(i('#edit-disqus-publickey').val()){t.push(i('#edit-disqus-publickey').parent().find('label').text())};if(i('#edit-disqus-secretkey').val()){t.push(i('#edit-disqus-secretkey').parent().find('label').text())};return t.join(', ')})}}})(jQuery);;
(function(e,n){'use strict';var t,i=[];e.behaviors.drupalAnnounce={attach:function(e){if(!t){t=document.createElement('div');t.id='drupal-live-announce';t.className='visually-hidden';t.setAttribute('aria-live','polite');t.setAttribute('aria-busy','false');document.body.appendChild(t)}}};function r(){var e=[],r='polite',n,u=i.length;for(var a=0;a<u;a++){n=i.pop();e.unshift(n.text);if(n.priority==='assertive'){r='assertive'}};if(e.length){t.innerHTML='';t.setAttribute('aria-busy','true');t.setAttribute('aria-live',r);t.innerHTML=e.join('\n');t.setAttribute('aria-busy','false')}};e.announce=function(t,e){i.push({text:t,priority:e});return(n(r,200)())}}(Drupal,Drupal.debounce));;
window.matchMedia||(window.matchMedia=function(){"use strict";var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),i=document.getElementsByTagName("script")[0],n=null;t.type="text/css";t.id="matchmediajs-test";i.parentNode.insertBefore(t,i);n="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle;e={matchMedium:function(e){var i="@media "+e+"{ #matchmediajs-test { width: 1px; } }";if(t.styleSheet){t.styleSheet.cssText=i}else{t.textContent=i}return n.width==="1px"}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}());
;
(function(){if(window.matchMedia&&window.matchMedia("all").addListener){return false}var e=window.matchMedia,i=e("only all").matches,n=false,t=0,a=[],r=function(i){clearTimeout(t);t=setTimeout(function(){for(var i=0,n=a.length;i<n;i++){var t=a[i].mql,r=a[i].listeners||[],o=e(t.media).matches;if(o!==t.matches){t.matches=o;for(var s=0,l=r.length;s<l;s++){r[s].call(window,t)}}}},30)};window.matchMedia=function(t){var o=e(t),s=[],l=0;o.addListener=function(e){if(!i){return}if(!n){n=true;window.addEventListener("resize",r,true)}if(l===0){l=a.push({mql:o,listeners:s})}s.push(e)};o.removeListener=function(e){for(var i=0,n=s.length;i<n;i++){if(s[i]===e){s.splice(i,1)}}};return o}})();
;
(function(a,t,l){'use strict';var o=t.url(l.path.currentPath);a.fn.drupalToolbarMenu=function(){var l={handleOpen:t.t('Extend'),handleClose:t.t('Collapse')};function s(t){var e=a(t.target),o=e.closest('li');n(o);var l=o.siblings().filter('.open');n(l,!1)};function c(a){if(!t.toolbar.models.toolbarModel.get('isFixed')){t.toolbar.models.toolbarModel.set('activeTab',null)};a.stopPropagation()};function n(a,t){var o=a.children('.toolbar-box').children('.toolbar-handle');t=(typeof t!=='undefined')?t:!a.hasClass('open');a.toggleClass('open',t);o.toggleClass('open',t);o.find('.action').text((t)?l.handleClose:l.handleOpen)};function r(o){var n={class:'toolbar-icon toolbar-handle',action:l.handleOpen,text:''};o.find('li > a').wrap('<div class="toolbar-box">');o.find('li').each(function(o,l){var e=a(l);if(e.children('ul.toolbar-menu').length){var i=e.children('.toolbar-box');n.text=t.t('@label',{'@label':i.find('a').text()});e.children('.toolbar-box').append(t.theme('toolbarMenuItemToggle',n))}})};function e(a,t){t=(!t)?1:t;var o=a.children('li').addClass('level-'+t);a=o.children('ul');if(a.length){e(a,t+1)}};function i(a){var t=a.find('a[href="'+location.pathname+'"]');if(t.length&&!o){o=location.pathname};if(o){var l=a.find('a[href="'+o+'"]').addClass('menu-item--active'),e=l.parentsUntil('.root','li').addClass('menu-item--active-trail');n(e,!0)}};return this.each(function(t){var o=a(this).once('toolbar-menu');if(o.length){o.on('click.toolbar','.toolbar-box',s).on('click.toolbar','.toolbar-box a',c);o.addClass('root');r(o);e(o);i(o)}})};t.theme.toolbarMenuItemToggle=function(a){return'<button class="'+a['class']+'"><span class="action">'+a.action+'</span><span class="label">'+a.text+'</span></button>'}}(jQuery,Drupal,drupalSettings));;
(function(e,o,a){'use strict';var t=e.extend({breakpoints:{'toolbar.narrow':'','toolbar.standard':'','toolbar.wide':''}},a.toolbar,{strings:{horizontal:o.t('Horizontal orientation'),vertical:o.t('Vertical orientation')}});o.behaviors.toolbar={attach:function(r){if(!window.matchMedia('only screen').matches){return};e(r).find('#toolbar-administration').once('toolbar').each(function(){var r=o.toolbar.models.toolbarModel=new o.toolbar.ToolbarModel({locked:JSON.parse(localStorage.getItem('Drupal.toolbar.trayVerticalLocked'))||!1,activeTab:document.getElementById(JSON.parse(localStorage.getItem('Drupal.toolbar.activeTabID')))});o.toolbar.views.toolbarVisualView=new o.toolbar.ToolbarVisualView({el:this,model:r,strings:t.strings});o.toolbar.views.toolbarAuralView=new o.toolbar.ToolbarAuralView({el:this,model:r,strings:t.strings});o.toolbar.views.bodyVisualView=new o.toolbar.BodyVisualView({el:this,model:r});var n=o.toolbar.models.menuModel=new o.toolbar.MenuModel();o.toolbar.views.menuVisualView=new o.toolbar.MenuVisualView({el:e(this).find('.toolbar-menu-administration').get(0),model:n,strings:t.strings});o.toolbar.setSubtrees.done(function(o){n.set('subtrees',o);var e=a.ajaxPageState.theme;localStorage.setItem('Drupal.toolbar.subtrees.'+e,JSON.stringify(o));r.set('areSubtreesLoaded',!0)});for(var l in t.breakpoints){if(t.breakpoints.hasOwnProperty(l)){var s=t.breakpoints[l],i=o.toolbar.mql[l]=window.matchMedia(s);i.addListener(o.toolbar.mediaQueryChangeHandler.bind(null,r,l));o.toolbar.mediaQueryChangeHandler.call(null,r,l,i)}};o.toolbar.views.toolbarVisualView.loadSubtrees();e(document).on('drupalViewportOffsetChange.toolbar',function(o,e){r.set('offsets',e)});r.on('change:orientation',function(o,t){e(document).trigger('drupalToolbarOrientationChange',t)}).on('change:activeTab',function(o,t){e(document).trigger('drupalToolbarTabChange',t)}).on('change:activeTray',function(o,t){e(document).trigger('drupalToolbarTrayChange',t)});if(o.toolbar.models.toolbarModel.get('orientation')==='horizontal'&&o.toolbar.models.toolbarModel.get('activeTab')===null){o.toolbar.models.toolbarModel.set({activeTab:e('.toolbar-bar .toolbar-tab:not(.home-toolbar-tab) a').get(0)})}})}};o.toolbar={views:{},models:{},mql:{},setSubtrees:new e.Deferred(),mediaQueryChangeHandler:function(o,t,e){switch(t){case'toolbar.narrow':o.set({isOriented:e.matches,isTrayToggleVisible:!1});if(!e.matches||!o.get('orientation')){o.set({orientation:'vertical'},{validate:!0})};break;case'toolbar.standard':o.set({isFixed:e.matches});break;case'toolbar.wide':o.set({orientation:((e.matches)?'horizontal':'vertical')},{validate:!0});o.set({isTrayToggleVisible:e.matches});break;default:break}}};o.theme.toolbarOrientationToggle=function(){return'<div class="toolbar-toggle-orientation"><div class="toolbar-lining"><button class="toolbar-icon" type="button"></button></div></div>'};o.AjaxCommands.prototype.setToolbarSubtrees=function(e,t,a){o.toolbar.setSubtrees.resolve(t.subtrees)}}(jQuery,Drupal,drupalSettings));;
(function(t,e){'use strict';e.toolbar.MenuModel=t.Model.extend({defaults:{subtrees:{}}})}(Backbone,Drupal));;
(function(t,e){'use strict';e.toolbar.ToolbarModel=t.Model.extend({defaults:{activeTab:null,activeTray:null,isOriented:!1,isFixed:!1,areSubtreesLoaded:!1,isViewportOverflowConstrained:!1,orientation:'vertical',locked:!1,isTrayToggleVisible:!1,height:null,offsets:{top:0,right:0,bottom:0,left:0}},validate:function(o,t){if(o.orientation==='horizontal'&&this.get('locked')&&!t.override){return e.t('The toolbar cannot be set to a horizontal orientation when it is locked.')}}})}(Backbone,Drupal));;
(function(o,t,e){'use strict';t.toolbar.BodyVisualView=e.View.extend({initialize:function(){this.listenTo(this.model,'change:orientation change:offsets change:activeTray change:isOriented change:isFixed change:isViewportOverflowConstrained',this.render)},render:function(){var s=o('body'),e=this.model.get('orientation'),i=this.model.get('isOriented'),t=this.model.get('isViewportOverflowConstrained');s.toggleClass('toolbar-vertical',(e==='vertical')).toggleClass('toolbar-horizontal',(i&&e==='horizontal')).toggleClass('toolbar-fixed',(t||this.model.get('isFixed'))).toggleClass('toolbar-tray-open',!!this.model.get('activeTray')).css('padding-top',this.model.get('offsets').top)}})}(jQuery,Drupal,Backbone));;
(function(r,i,e){'use strict';e.toolbar.MenuVisualView=i.View.extend({initialize:function(){this.listenTo(this.model,'change:subtrees',this.render)},render:function(){var e=this.model.get('subtrees');for(var i in e){if(e.hasOwnProperty(i)){this.$el.find('#toolbar-link-'+i).once('toolbar-subtrees').after(e[i])}};if('drupalToolbarMenu' in r.fn){this.$el.children('.toolbar-menu').drupalToolbarMenu()}}})}(jQuery,Backbone,Drupal));;
(function(t,n){'use strict';n.toolbar.ToolbarAuralView=t.View.extend({initialize:function(n){this.strings=n.strings;this.listenTo(this.model,'change:orientation',this.onOrientationChange);this.listenTo(this.model,'change:activeTray',this.onActiveTrayChange)},onOrientationChange:function(i,t){n.announce(n.t('Tray orientation changed to @orientation.',{'@orientation':t}))},onActiveTrayChange:function(i,t){var r=(t===null)?i.previous('activeTray'):t,a=(t===null)?n.t('closed'):n.t('opened'),o=r.querySelector('.toolbar-tray-name'),e;if(o!==null){e=n.t('Tray "@tray" @action.',{'@tray':o.textContent,'@action':a})}
else{e=n.t('Tray @action.',{'@action':a})};n.announce(e)}})}(Backbone,Drupal));;
(function(t,e,a,o){'use strict';e.toolbar.ToolbarVisualView=o.View.extend({events:function(){var t=function(t){t.preventDefault();t.target.click()};return{'click .toolbar-bar .toolbar-tab .trigger':'onTabClick','click .toolbar-toggle-orientation button':'onOrientationToggleClick','touchend .toolbar-bar .toolbar-tab .trigger':t,'touchend .toolbar-toggle-orientation button':t}},initialize:function(t){this.strings=t.strings;this.listenTo(this.model,'change:activeTab change:orientation change:isOriented change:isTrayToggleVisible',this.render);this.listenTo(this.model,'change:mqMatches',this.onMediaQueryChange);this.listenTo(this.model,'change:offsets',this.adjustPlacement);this.$el.find('.toolbar-tray .toolbar-lining').append(e.theme('toolbarOrientationToggle'));this.model.trigger('change:activeTab')},render:function(){this.updateTabs();this.updateTrayOrientation();this.updateBarAttributes();if(this.model.changed.orientation==='vertical'||this.model.changed.activeTab){this.loadSubtrees()};window.setTimeout(function(){e.displace(!0)},0);return this},onTabClick:function(t){if(t.target.hasAttribute('data-toolbar-tray')){var a=this.model.get('activeTab'),e=t.target;this.model.set('activeTab',(!a||e!==a)?e:null);t.preventDefault();t.stopPropagation()}},onOrientationToggleClick:function(t){var o=this.model.get('orientation'),e=(o==='vertical')?'horizontal':'vertical',a=e==='vertical';if(a){localStorage.setItem('Drupal.toolbar.trayVerticalLocked','true')}
else{localStorage.removeItem('Drupal.toolbar.trayVerticalLocked')};this.model.set({locked:a,orientation:e},{validate:!0,override:!0});t.preventDefault();t.stopPropagation()},updateTabs:function(){var e=t(this.model.get('activeTab'));t(this.model.previous('activeTab')).removeClass('is-active').prop('aria-pressed',!1);t(this.model.previous('activeTray')).removeClass('is-active');if(e.length>0){e.addClass('is-active').prop('aria-pressed',!0);var r=e.attr('data-toolbar-tray'),o=e.get(0).id;if(o){localStorage.setItem('Drupal.toolbar.activeTabID',JSON.stringify(o))};var a=this.$el.find('[data-toolbar-tray="'+r+'"].toolbar-tray');if(a.length){a.addClass('is-active');this.model.set('activeTray',a.get(0))}
else{this.model.set('activeTray',null)}}
else{this.model.set('activeTray',null);localStorage.removeItem('Drupal.toolbar.activeTabID')}},updateBarAttributes:function(){var t=this.model.get('isOriented');if(t){this.$el.find('.toolbar-bar').attr('data-offset-top','')}
else{this.$el.find('.toolbar-bar').removeAttr('data-offset-top')};this.$el.toggleClass('toolbar-oriented',t)},updateTrayOrientation:function(){var e=this.model.get('orientation'),t=(e==='vertical')?'horizontal':'vertical',a=this.$el.find('.toolbar-tray').removeClass('toolbar-tray-horizontal toolbar-tray-vertical').addClass('toolbar-tray-'+e),i='toolbar-icon-toggle-'+e,r='toolbar-icon-toggle-'+t,o=this.$el.find('.toolbar-toggle-orientation').toggle(this.model.get('isTrayToggleVisible'));o.find('button').val(t).attr('title',this.strings[t]).text(this.strings[t]).removeClass(i).addClass(r);var s=document.documentElement.dir,l=(s==='rtl')?'right':'left';a.removeAttr('data-offset-left data-offset-right data-offset-top');a.filter('.toolbar-tray-vertical.is-active').attr('data-offset-'+l,'');a.filter('.toolbar-tray-horizontal.is-active').attr('data-offset-top','')},adjustPlacement:function(){var t=this.$el.find('.toolbar-tray');if(!this.model.get('isOriented')){t.css('margin-top',0);t.removeClass('toolbar-tray-horizontal').addClass('toolbar-tray-vertical')}
else{t.css('margin-top',this.$el.find('.toolbar-bar').outerHeight())}},loadSubtrees:function(){var n=t(this.model.get('activeTab')),s=this.model.get('orientation');if(!this.model.get('areSubtreesLoaded')&&typeof n.data('drupal-subtrees')!=='undefined'&&s==='vertical'){var r=a.toolbar.subtreesHash,o=a.ajaxPageState.theme,c=e.url('toolbar/subtrees/'+r),d=localStorage.getItem('Drupal.toolbar.subtreesHash.'+o),l=JSON.parse(localStorage.getItem('Drupal.toolbar.subtrees.'+o)),i=this.model.get('orientation')==='vertical';if(i&&r===d&&l){e.toolbar.setSubtrees.resolve(l)}
else if(i){localStorage.removeItem('Drupal.toolbar.subtreesHash.'+o);localStorage.removeItem('Drupal.toolbar.subtrees.'+o);e.ajax({url:c}).execute();localStorage.setItem('Drupal.toolbar.subtreesHash.'+o,r)}}}})}(jQuery,Drupal,drupalSettings,Backbone));;
(function(t,e){'use strict';function i(){this.stack=[]};t.extend(i.prototype,{constrain:function(e){var r=this.stack.length;for(var n=0;n<r;n++){this.stack[n].deactivate()};var s=t(e).find(':tabbable').addBack(':tabbable'),i=new a({level:this.stack.length,$tabbableElements:s});this.stack.push(i);i.activate();t(document).trigger('drupalTabbingConstrained',i);return i},release:function(){var t=this.stack.length-1;while(t>=0&&this.stack[t].released){t--};this.stack.splice(t+1);if(t>=0){this.stack[t].activate()}},activate:function(e){var i=e.$tabbableElements,l=e.level,a=t(':tabbable').not(i);e.$disabledElements=a;var s=a.length;for(var n=0;n<s;n++){this.recordTabindex(a.eq(n),l)};a.prop('tabindex',-1).prop('autofocus',!1);var r=i.filter('[autofocus]').eq(-1);if(r.length===0){r=i.eq(0)};r.trigger('focus')},deactivate:function(t){var a=t.$disabledElements,n=t.level,i=a.length;for(var e=0;e<i;e++){this.restoreTabindex(a.eq(e),n)}},recordTabindex:function(t,e){var a=t.data('drupalOriginalTabIndices')||{};a[e]={tabindex:t[0].getAttribute('tabindex'),autofocus:t[0].hasAttribute('autofocus')};t.data('drupalOriginalTabIndices',a)},restoreTabindex:function(t,e){var a=t.data('drupalOriginalTabIndices');if(a&&a[e]){var n=a[e];if(n.tabindex){t[0].setAttribute('tabindex',n.tabindex)}
else{t[0].removeAttribute('tabindex')};if(n.autofocus){t[0].setAttribute('autofocus','autofocus')};if(e===0){t.removeData('drupalOriginalTabIndices')}
else{var i=e;while(a.hasOwnProperty(i)){delete a[i];i++};t.data('drupalOriginalTabIndices',a)}}}});function a(e){t.extend(this,{level:null,$tabbableElements:t(),$disabledElements:t(),released:!1,active:!1},e)};t.extend(a.prototype,{release:function(){if(!this.released){this.deactivate();this.released=!0;e.tabbingManager.release(this);t(document).trigger('drupalTabbingContextReleased',this)}},activate:function(){if(!this.active&&!this.released){this.active=!0;e.tabbingManager.activate(this);t(document).trigger('drupalTabbingContextActivated',this)}},deactivate:function(){if(this.active){this.active=!1;e.tabbingManager.deactivate(this);t(document).trigger('drupalTabbingContextDeactivated',this)}}});if(e.tabbingManager){return};e.tabbingManager=new i()}(jQuery,Drupal));;
(function(o,t,a){'use strict';var e={tabbingReleased:t.t('Tabbing is no longer constrained by the Contextual module.'),tabbingConstrained:t.t('Tabbing is constrained to a set of @contextualsCount and the edit mode toggle.'),pressEsc:t.t('Press the esc key to exit.')};function n(l){if(!t.contextual||!t.contextual.collection){return};var n=t.contextualToolbar,i=n.model=new n.StateModel({isViewing:localStorage.getItem('Drupal.contextualToolbar.isViewing')!=='false'},{contextualCollection:t.contextual.collection});var a={el:o('.toolbar .toolbar-bar .contextual-toolbar-tab'),model:i,strings:e};new n.VisualView(a);new n.AuralView(a)};t.behaviors.contextualToolbar={attach:function(t){if(o('body').once('contextualToolbar-init').length){n(t)}}};t.contextualToolbar={model:null}})(jQuery,Drupal,Backbone);;
(function(t,i){'use strict';t.contextualToolbar.StateModel=i.Model.extend({defaults:{isViewing:!0,isVisible:!1,contextualCount:0,tabbingContext:null},initialize:function(i,t){this.listenTo(t.contextualCollection,'reset remove add',this.countContextualLinks);this.listenTo(t.contextualCollection,'add',this.lockNewContextualLinks);this.listenTo(this,'change:contextualCount',this.updateVisibility);this.listenTo(this,'change:isViewing',function(n,i){t.contextualCollection.each(function(t){t.set('isLocked',!i)})})},countContextualLinks:function(i,t){this.set('contextualCount',t.length)},lockNewContextualLinks:function(t,i){if(!this.get('isViewing')){t.set('isLocked',!0)}},updateVisibility:function(){this.set('isVisible',this.get('contextualCount')>0)}})})(Drupal,Backbone);;
(function(t,n,i,e){'use strict';n.contextualToolbar.AuralView=i.View.extend({announcedOnce:!1,initialize:function(n){this.options=n;this.listenTo(this.model,'change',this.render);this.listenTo(this.model,'change:isViewing',this.manageTabbing);t(document).on('keyup',e.bind(this.onKeypress,this))},render:function(){this.$el.find('button').attr('aria-pressed',!this.model.get('isViewing'));return this},manageTabbing:function(){var e=this.model.get('tabbingContext');if(e){e.release();n.announce(this.options.strings.tabbingReleased)};if(!this.model.get('isViewing')){e=n.tabbingManager.constrain(t('.contextual-toolbar-tab, .contextual'));this.model.set('tabbingContext',e);this.announceTabbingConstraint();this.announcedOnce=!0}},announceTabbingConstraint:function(){var t=this.options.strings;n.announce(n.formatString(t.tabbingConstrained,{'@contextualsCount':n.formatPlural(n.contextual.collection.length,'@count contextual link','@count contextual links')}));n.announce(t.pressEsc)},onKeypress:function(n){if(!this.announcedOnce&&n.keyCode===9&&!this.model.get('isViewing')){this.announceTabbingConstraint();this.announcedOnce=!0};if(n.keyCode===27){this.model.set('isViewing',!0)}}})})(jQuery,Drupal,Backbone,_);;
(function(e,i){'use strict';e.contextualToolbar.VisualView=i.View.extend({events:function(){var e=function(e){e.preventDefault();e.target.click()};return{click:function(){this.model.set('isViewing',!this.model.get('isViewing'))},touchend:e}},initialize:function(){this.listenTo(this.model,'change',this.render);this.listenTo(this.model,'change:isViewing',this.persist)},render:function(){this.$el.toggleClass('hidden',!this.model.get('isVisible'));this.$el.find('button').toggleClass('is-active',!this.model.get('isViewing'));return this},persist:function(i,e){if(!e){localStorage.setItem('Drupal.contextualToolbar.isViewing','false')}
else{localStorage.removeItem('Drupal.contextualToolbar.isViewing')}}})})(Drupal,Backbone);;
/* jQuery Foundation Joyride Plugin 2.1 | Copyright 2012, ZURB | www.opensource.org/licenses/mit-license.php */
(function(e,t,n){"use strict";var r={version:"2.0.3",tipLocation:"bottom",nubPosition:"auto",scroll:!0,scrollSpeed:300,timer:0,autoStart:!1,startTimerOnClick:!0,startOffset:0,nextButton:!0,tipAnimation:"fade",pauseAfter:[],tipAnimationFadeSpeed:300,cookieMonster:!1,cookieName:"joyride",cookieDomain:!1,cookiePath:!1,localStorage:!1,localStorageKey:"joyride",tipContainer:"body",modal:!1,expose:!1,postExposeCallback:e.noop,preRideCallback:e.noop,postRideCallback:e.noop,preStepCallback:e.noop,postStepCallback:e.noop,template:{link:'<a href="#close" class="joyride-close-tip">X</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper" role="dialog"></div>',button:'<a href="#" class="joyride-next-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',exposeCover:'<div class="joyride-expose-cover"></div>'}},i=i||!1,s={},o={init:function(n){return this.each(function(){e.isEmptyObject(s)?(s=e.extend(!0,r,n),s.document=t.document,s.$document=e(s.document),s.$window=e(t),s.$content_el=e(this),s.$body=e(s.tipContainer),s.body_offset=e(s.tipContainer).position(),s.$tip_content=e("> li",s.$content_el),s.paused=!1,s.attempts=0,s.tipLocationPatterns={top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},o.jquery_check(),e.isFunction(e.cookie)||(s.cookieMonster=!1),(!s.cookieMonster||!e.cookie(s.cookieName))&&(!s.localStorage||!o.support_localstorage()||!localStorage.getItem(s.localStorageKey))&&(s.$tip_content.each(function(t){o.create({$li:e(this),index:t})}),s.autoStart&&(!s.startTimerOnClick&&s.timer>0?(o.show("init"),o.startTimer()):o.show("init"))),s.$document.on("click.joyride",".joyride-next-tip, .joyride-modal-bg",function(e){e.preventDefault(),s.$li.next().length<1?o.end():s.timer>0?(clearTimeout(s.automate),o.hide(),o.show(),o.startTimer()):(o.hide(),o.show())}),s.$document.on("click.joyride",".joyride-close-tip",function(e){e.preventDefault(),o.end()}),s.$window.bind("resize.joyride",function(t){if(s.$li){if(s.exposed&&s.exposed.length>0){var n=e(s.exposed);n.each(function(){var t=e(this);o.un_expose(t),o.expose(t)})}o.is_phone()?o.pos_phone():o.pos_default()}})):o.restart()})},resume:function(){o.set_li(),o.show()},nextTip:function(){s.$li.next().length<1?o.end():s.timer>0?(clearTimeout(s.automate),o.hide(),o.show(),o.startTimer()):(o.hide(),o.show())},tip_template:function(t){var n,r,i;return t.tip_class=t.tip_class||"",n=e(s.template.tip).addClass(t.tip_class),r=e.trim(e(t.li).html())+o.button_text(t.button_text)+s.template.link+o.timer_instance(t.index),i=e(s.template.wrapper),t.li.attr("data-aria-labelledby")&&i.attr("aria-labelledby",t.li.attr("data-aria-labelledby")),t.li.attr("data-aria-describedby")&&i.attr("aria-describedby",t.li.attr("data-aria-describedby")),n.append(i),n.first().attr("data-index",t.index),e(".joyride-content-wrapper",n).append(r),n[0]},timer_instance:function(t){var n;return t===0&&s.startTimerOnClick&&s.timer>0||s.timer===0?n="":n=o.outerHTML(e(s.template.timer)[0]),n},button_text:function(t){return s.nextButton?(t=e.trim(t)||"Next",t=o.outerHTML(e(s.template.button).append(t)[0])):t="",t},create:function(t){var n=t.$li.attr("data-button")||t.$li.attr("data-text"),r=t.$li.attr("class"),i=e(o.tip_template({tip_class:r,index:t.index,button_text:n,li:t.$li}));e(s.tipContainer).append(i)},show:function(t){var r={},i,u=[],a=0,f,l=null;if(s.$li===n||e.inArray(s.$li.index(),s.pauseAfter)===-1){s.paused?s.paused=!1:o.set_li(t),s.attempts=0;if(s.$li.length&&s.$target.length>0){t&&(s.preRideCallback(s.$li.index(),s.$next_tip),s.modal&&o.show_modal()),s.preStepCallback(s.$li.index(),s.$next_tip),u=(s.$li.data("options")||":").split(";"),a=u.length;for(i=a-1;i>=0;i--)f=u[i].split(":"),f.length===2&&(r[e.trim(f[0])]=e.trim(f[1]));s.tipSettings=e.extend({},s,r),s.tipSettings.tipLocationPattern=s.tipLocationPatterns[s.tipSettings.tipLocation],s.modal&&s.expose&&o.expose(),!/body/i.test(s.$target.selector)&&s.scroll&&o.scroll_to(),o.is_phone()?o.pos_phone(!0):o.pos_default(!0),l=e(".joyride-timer-indicator",s.$next_tip),/pop/i.test(s.tipAnimation)?(l.outerWidth(0),s.timer>0?(s.$next_tip.show(),l.animate({width:e(".joyride-timer-indicator-wrap",s.$next_tip).outerWidth()},s.timer)):s.$next_tip.show()):/fade/i.test(s.tipAnimation)&&(l.outerWidth(0),s.timer>0?(s.$next_tip.fadeIn(s.tipAnimationFadeSpeed),s.$next_tip.show(),l.animate({width:e(".joyride-timer-indicator-wrap",s.$next_tip).outerWidth()},s.timer)):s.$next_tip.fadeIn(s.tipAnimationFadeSpeed)),s.$current_tip=s.$next_tip,e(".joyride-next-tip",s.$current_tip).focus(),o.tabbable(s.$current_tip)}else s.$li&&s.$target.length<1?o.show():o.end()}else s.paused=!0},is_phone:function(){return i?i.mq("only screen and (max-width: 767px)"):s.$window.width()<767?!0:!1},support_localstorage:function(){return i?i.localstorage:!!t.localStorage},hide:function(){s.modal&&s.expose&&o.un_expose(),s.modal||e(".joyride-modal-bg").hide(),s.$current_tip.hide(),s.postStepCallback(s.$li.index(),s.$current_tip)},set_li:function(e){e?(s.$li=s.$tip_content.eq(s.startOffset),o.set_next_tip(),s.$current_tip=s.$next_tip):(s.$li=s.$li.next(),o.set_next_tip()),o.set_target()},set_next_tip:function(){s.$next_tip=e(".joyride-tip-guide[data-index="+s.$li.index()+"]")},set_target:function(){var t=s.$li.attr("data-class"),n=s.$li.attr("data-id"),r=function(){return n?e(s.document.getElementById(n)):t?e("."+t).filter(":visible").first():e("body")};s.$target=r()},scroll_to:function(){var t,n;t=s.$window.height()/2,n=Math.ceil(s.$target.offset().top-t+s.$next_tip.outerHeight()),e("html, body").stop().animate({scrollTop:n},s.scrollSpeed)},paused:function(){return e.inArray(s.$li.index()+1,s.pauseAfter)===-1?!0:!1},destroy:function(){e.isEmptyObject(s)||s.$document.off(".joyride"),e(t).off(".joyride"),e(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride"),e(".joyride-tip-guide, .joyride-modal-bg").remove(),clearTimeout(s.automate),s={}},restart:function(){s.autoStart?(o.hide(),s.$li=n,o.show("init")):(!s.startTimerOnClick&&s.timer>0?(o.show("init"),o.startTimer()):o.show("init"),s.autoStart=!0)},pos_default:function(t){var n=Math.ceil(s.$window.height()/2),r=s.$next_tip.offset(),i=e(".joyride-nub",s.$next_tip),u=Math.ceil(i.outerWidth()/2),a=Math.ceil(i.outerHeight()/2),f=t||!1;f&&(s.$next_tip.css("visibility","hidden"),s.$next_tip.show());if(!/body/i.test(s.$target.selector)){var l=s.tipSettings.tipAdjustmentY?parseInt(s.tipSettings.tipAdjustmentY):0,c=s.tipSettings.tipAdjustmentX?parseInt(s.tipSettings.tipAdjustmentX):0;o.bottom()?(s.$next_tip.css({top:s.$target.offset().top+a+s.$target.outerHeight()+l,left:s.$target.offset().left+c}),/right/i.test(s.tipSettings.nubPosition)&&s.$next_tip.css("left",s.$target.offset().left-s.$next_tip.outerWidth()+s.$target.outerWidth()),o.nub_position(i,s.tipSettings.nubPosition,"top")):o.top()?(s.$next_tip.css({top:s.$target.offset().top-s.$next_tip.outerHeight()-a+l,left:s.$target.offset().left+c}),o.nub_position(i,s.tipSettings.nubPosition,"bottom")):o.right()?(s.$next_tip.css({top:s.$target.offset().top+l,left:s.$target.outerWidth()+s.$target.offset().left+u+c}),o.nub_position(i,s.tipSettings.nubPosition,"left")):o.left()&&(s.$next_tip.css({top:s.$target.offset().top+l,left:s.$target.offset().left-s.$next_tip.outerWidth()-u+c}),o.nub_position(i,s.tipSettings.nubPosition,"right")),!o.visible(o.corners(s.$next_tip))&&s.attempts<s.tipSettings.tipLocationPattern.length&&(i.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),s.tipSettings.tipLocation=s.tipSettings.tipLocationPattern[s.attempts],s.attempts++,o.pos_default(!0))}else s.$li.length&&o.pos_modal(i);f&&(s.$next_tip.hide(),s.$next_tip.css("visibility","visible"))},pos_phone:function(t){var n=s.$next_tip.outerHeight(),r=s.$next_tip.offset(),i=s.$target.outerHeight(),u=e(".joyride-nub",s.$next_tip),a=Math.ceil(u.outerHeight()/2),f=t||!1;u.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),f&&(s.$next_tip.css("visibility","hidden"),s.$next_tip.show()),/body/i.test(s.$target.selector)?s.$li.length&&o.pos_modal(u):o.top()?(s.$next_tip.offset({top:s.$target.offset().top-n-a}),u.addClass("bottom")):(s.$next_tip.offset({top:s.$target.offset().top+i+a}),u.addClass("top")),f&&(s.$next_tip.hide(),s.$next_tip.css("visibility","visible"))},pos_modal:function(e){o.center(),e.hide(),o.show_modal()},show_modal:function(){e(".joyride-modal-bg").length<1&&e("body").append(s.template.modal).show(),/pop/i.test(s.tipAnimation)?e(".joyride-modal-bg").show():e(".joyride-modal-bg").fadeIn(s.tipAnimationFadeSpeed)},expose:function(){var n,r,i,u,a="expose-"+Math.floor(Math.random()*1e4);if(arguments.length>0&&arguments[0]instanceof e)i=arguments[0];else{if(!s.$target||!!/body/i.test(s.$target.selector))return!1;i=s.$target}if(i.length<1)return t.console&&console.error("element not valid",i),!1;n=e(s.template.expose),s.$body.append(n),n.css({top:i.offset().top,left:i.offset().left,width:i.outerWidth(!0),height:i.outerHeight(!0)}),r=e(s.template.exposeCover),u={zIndex:i.css("z-index"),position:i.css("position")},i.css("z-index",n.css("z-index")*1+1),u.position=="static"&&i.css("position","relative"),i.data("expose-css",u),r.css({top:i.offset().top,left:i.offset().left,width:i.outerWidth(!0),height:i.outerHeight(!0)}),s.$body.append(r),n.addClass(a),r.addClass(a),s.tipSettings.exposeClass&&(n.addClass(s.tipSettings.exposeClass),r.addClass(s.tipSettings.exposeClass)),i.data("expose",a),s.postExposeCallback(s.$li.index(),s.$next_tip,i),o.add_exposed(i)},un_expose:function(){var n,r,i,u,a=!1;if(arguments.length>0&&arguments[0]instanceof e)r=arguments[0];else{if(!s.$target||!!/body/i.test(s.$target.selector))return!1;r=s.$target}if(r.length<1)return t.console&&console.error("element not valid",r),!1;n=r.data("expose"),i=e("."+n),arguments.length>1&&(a=arguments[1]),a===!0?e(".joyride-expose-wrapper,.joyride-expose-cover").remove():i.remove(),u=r.data("expose-css"),u.zIndex=="auto"?r.css("z-index",""):r.css("z-index",u.zIndex),u.position!=r.css("position")&&(u.position=="static"?r.css("position",""):r.css("position",u.position)),r.removeData("expose"),r.removeData("expose-z-index"),o.remove_exposed(r)},add_exposed:function(t){s.exposed=s.exposed||[],t instanceof e?s.exposed.push(t[0]):typeof t=="string"&&s.exposed.push(t)},remove_exposed:function(t){var n;t instanceof e?n=t[0]:typeof t=="string"&&(n=t),s.exposed=s.exposed||[];for(var r=0;r<s.exposed.length;r++)if(s.exposed[r]==n){s.exposed.splice(r,1);return}},center:function(){var e=s.$window;return s.$next_tip.css({top:(e.height()-s.$next_tip.outerHeight())/2+e.scrollTop(),left:(e.width()-s.$next_tip.outerWidth())/2+e.scrollLeft()}),!0},bottom:function(){return/bottom/i.test(s.tipSettings.tipLocation)},top:function(){return/top/i.test(s.tipSettings.tipLocation)},right:function(){return/right/i.test(s.tipSettings.tipLocation)},left:function(){return/left/i.test(s.tipSettings.tipLocation)},corners:function(e){var t=s.$window,n=t.height()/2,r=Math.ceil(s.$target.offset().top-n+s.$next_tip.outerHeight()),i=t.width()+t.scrollLeft(),o=t.height()+r,u=t.height()+t.scrollTop(),a=t.scrollTop();return r<a&&(r<0?a=0:a=r),o>u&&(u=o),[e.offset().top<a,i<e.offset().left+e.outerWidth(),u<e.offset().top+e.outerHeight(),t.scrollLeft()>e.offset().left]},visible:function(e){var t=e.length;while(t--)if(e[t])return!1;return!0},nub_position:function(e,t,n){t==="auto"?e.addClass(n):e.addClass(t)},startTimer:function(){s.$li.length?s.automate=setTimeout(function(){o.hide(),o.show(),o.startTimer()},s.timer):clearTimeout(s.automate)},end:function(){s.cookieMonster&&e.cookie(s.cookieName,"ridden",{expires:365,domain:s.cookieDomain,path:s.cookiePath}),s.localStorage&&localStorage.setItem(s.localStorageKey,!0),s.timer>0&&clearTimeout(s.automate),s.modal&&s.expose&&o.un_expose(),s.$current_tip&&s.$current_tip.hide(),s.$li&&(s.postStepCallback(s.$li.index(),s.$current_tip),s.postRideCallback(s.$li.index(),s.$current_tip)),e(".joyride-modal-bg").hide()},jquery_check:function(){return e.isFunction(e.fn.on)?!0:(e.fn.on=function(e,t,n){return this.delegate(t,e,n)},e.fn.off=function(e,t,n){return this.undelegate(t,e,n)},!1)},outerHTML:function(e){return e.outerHTML||(new XMLSerializer).serializeToString(e)},version:function(){return s.version},tabbable:function(t){e(t).on("keydown",function(n){if(!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===27){n.preventDefault(),o.end();return}if(n.keyCode!==9)return;var r=e(t).find(":tabbable"),i=r.filter(":first"),s=r.filter(":last");n.target===s[0]&&!n.shiftKey?(i.focus(1),n.preventDefault()):n.target===i[0]&&n.shiftKey&&(s.focus(1),n.preventDefault())})}};e.fn.joyride=function(t){if(o[t])return o[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return o.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.joyride")}})(jQuery,this);
;
(function(t,i,e,r){'use strict';var o=decodeURI(window.location.search);e.behaviors.tour={attach:function(i){t('body').once('tour').each(function(){var s=new e.tour.models.StateModel();new e.tour.views.ToggleTourView({el:t(i).find('#toolbar-tab-tour'),model:s});s.on('change:isActive',function(e,i){t(r).trigger((i)?'drupalTourStarted':'drupalTourStopped')}).set('tour',t(i).find('ol#tour'));if(/tour=?/i.test(o)){s.set('isActive',!0)}})}};e.tour=e.tour||{models:{},views:{}};e.tour.models.StateModel=i.Model.extend({defaults:{tour:[],isActive:!1,activeTour:[]}});e.tour.views.ToggleTourView=i.View.extend({events:{click:'onClick'},initialize:function(){this.listenTo(this.model,'change:tour change:isActive',this.render);this.listenTo(this.model,'change:isActive',this.toggleTour)},render:function(){this.$el.toggleClass('hidden',this._getTour().length===0);var t=this.model.get('isActive');this.$el.find('button').toggleClass('is-active',t).prop('aria-pressed',t);return this},toggleTour:function(){if(this.model.get('isActive')){var t=this._getTour();this._removeIrrelevantTourItems(t,this._getDocument());var e=this;if(t.find('li').length){t.joyride({autoStart:!0,postRideCallback:function(){e.model.set('isActive',!1)},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',button:'<a href="#" class="button button--primary joyride-next-tip"></a>'}});this.model.set({isActive:!0,activeTour:t})}}
else{this.model.get('activeTour').joyride('destroy');this.model.set({isActive:!1,activeTour:[]})}},onClick:function(t){this.model.set('isActive',!this.model.get('isActive'));t.preventDefault();t.stopPropagation()},_getTour:function(){return this.model.get('tour')},_getDocument:function(){return t(r)},_removeIrrelevantTourItems:function(i,r){var s=!1,n=/tips=([^&]+)/.exec(o);i.find('li').each(function(){var e=t(this),o=e.attr('data-id'),i=e.attr('data-class');if(n&&!t(this).hasClass(n[1])){s=!0;e.remove();return};if((!o&&!i)||(o&&r.find('#'+o).length)||(i&&r.find('.'+i).length)){return};s=!0;e.remove()});if(s){var a=i.find('li').length;if(!a){this.model.set({tour:[]})};i.find('li').each(function(i){var o=e.t('!tour_item of !total',{'!tour_item':i+1,'!total':a});t(this).find('.tour-progress').text(o)}).eq(-1).attr('data-text',e.t('End tour'))}}})})(jQuery,Backbone,Drupal,document);;
(function(t){t(document).ready(function(){t('a.toolbar-icon').removeAttr('title')})})(jQuery);;
(function(i,a,n){'use strict';var e=n.path,s=sessionStorage.getItem('escapeAdminPath'),t=window.location;if(!e.currentPathIsAdmin&&!/destination=/.test(t.search)){sessionStorage.setItem('escapeAdminPath',t)};a.behaviors.escapeAdmin={attach:function(){var t=i('[data-toolbar-escape-admin]').once('escapeAdmin');if(t.length&&e.currentPathIsAdmin){if(s!==null){t.attr('href',s)}
else{t.text(a.t('Home'))};t.closest('.toolbar-tab').removeClass('hidden')}}}})(jQuery,Drupal,drupalSettings);;
(function(e){'use strict';Drupal.disqus.disqusTrackNewComment=function(){if(typeof _gaq=='undefined'&&typeof ga=='undefined'){return};var e=document.location.href.toLowerCase().substring((document.location.href.toLowerCase().indexOf(document.domain.toLowerCase()))+(document.domain.toLowerCase().length));if(typeof _gaq!='undefined'){_gaq.push(['_trackEvent','Disqus','Comment',e])}
else{ga('send',{'hitType':'event','eventCategory':'Disqus','eventAction':'Comment','eventLabel':e})}}})(jQuery);;
(function(n,t){t.behaviors.foundationAlertClose={attach:function(t,o){n('.zurb-foundation-callout').once('foundation-alert').on('closed.zf',function(t){var a=n(t.target),o=a.parent();a.remove();o.html(o.html().replace(/\n/g,''))})}}})(jQuery,Drupal);;
(function(a,t){t.behaviors.foundationTopBarActive={attach:function(t,i){var n=a(t).find('.top-bar .menu-item > a.is-active');if(n.length){n.once('foundationTopBarActive').each(function(){a(this).parent().addClass('active')})}}}})(jQuery,Drupal);;
