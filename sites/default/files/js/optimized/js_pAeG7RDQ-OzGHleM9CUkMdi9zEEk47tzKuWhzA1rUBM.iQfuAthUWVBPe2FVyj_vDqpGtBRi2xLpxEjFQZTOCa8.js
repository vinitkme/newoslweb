(function(o,t){'use strict';t.behaviors.dialog={attach:function(t,i){var e=o(t);if(!o('#drupal-modal').length){o('<div id="drupal-modal" class="ui-front"/>').hide().appendTo('body')};var a=e.closest('.ui-dialog-content');if(a.length){if(a.dialog('option','drupalAutoButtons')){a.trigger('dialogButtonsChange')};a.dialog('widget').trigger('focus')};var n=i.dialog.close;i.dialog.close=function(t){n.apply(i.dialog,arguments);o(t.target).remove()}},prepareDialogButtons:function(t){var i=[],a=t.find('.form-actions input[type=submit], .form-actions a.button');a.each(function(){var t=o(this).css({display:'block',width:0,height:0,padding:0,border:0,overflow:'hidden'});i.push({text:t.html()||t.attr('value'),class:t.attr('class'),click:function(o){if(t.is('a')){t[0].click()}
else{t.trigger('mousedown').trigger('mouseup').trigger('click');o.preventDefault()}}})});return i}};t.AjaxCommands.prototype.openDialog=function(a,i,n){if(!i.selector){return!1};var e=o(i.selector);if(!e.length){e=o('<div id="'+i.selector.replace(/^#/,'')+'" class="ui-front"/>').appendTo('body')};if(!a.wrapper){a.wrapper=e.attr('id')};i.command='insert';i.method='html';a.commands.insert(a,i,n);if(!i.dialogOptions.buttons){i.dialogOptions.drupalAutoButtons=!0;i.dialogOptions.buttons=t.behaviors.dialog.prepareDialogButtons(e)};e.on('dialogButtonsChange',function(){var o=t.behaviors.dialog.prepareDialogButtons(e);e.dialog('option','buttons',o)});i.dialogOptions=i.dialogOptions||{};var l=t.dialog(e.get(0),i.dialogOptions);if(i.dialogOptions.modal){l.showModal()}
else{l.show()};e.parent().find('.ui-dialog-buttonset').addClass('form-actions')};t.AjaxCommands.prototype.closeDialog=function(i,a,n){var e=o(a.selector);if(e.length){t.dialog(e.get(0)).close();if(!a.persist){e.remove()}};e.off('dialogButtonsChange')};t.AjaxCommands.prototype.setDialogOption=function(t,i,a){var e=o(i.selector);if(e.length){e.dialog('option',i.optionName,i.optionValue)}};o(window).on('dialog:aftercreate',function(o,t,i,a){i.on('click.dialog','.dialog-cancel',function(o){t.close('cancel');o.preventDefault();o.stopPropagation()})});o(window).on('dialog:beforeclose',function(o,t,i){i.off('.dialog')})})(jQuery,Drupal);