(function(t,e,l){'use strict';e.behaviors.tableHeader={attach:function(e){t(window).one('scroll.TableHeaderInit',{context:e},c)}};function a(t){return document.documentElement[t]||document.body[t]};function c(e){var a=t(e.data.context).find('table.sticky-enabled').once('tableheader'),n=a.length;for(var l=0;l<n;l++){i.tables.push(new i(a[l]))};s('onScroll')};function s(t,e){var s=i.tables,a=s.length;for(var l=0;l<a;l++){s[l][t](e)}};function n(t){s('recalculateSticky')};function r(t){s('onScroll')};function o(t,e){s('stickyPosition',e.top)};t(window).on({'resize.TableHeader':n,'scroll.TableHeader':r});t(document).on({'columnschange.TableHeader':n,'drupalViewportOffsetChange.TableHeader':o});function i(e){var i=t(e);this.$originalTable=i;this.$originalHeader=i.children('thead');this.$originalHeaderCells=this.$originalHeader.find('> tr > th');this.displayWeight=null;this.$originalTable.addClass('sticky-table');this.tableHeight=i[0].clientHeight;this.tableOffset=this.$originalTable.offset();this.$originalTable.on('columnschange',{tableHeader:this},function(t,e){var i=t.data.tableHeader;if(i.displayWeight===null||i.displayWeight!==e){i.recalculateSticky()};i.displayWeight=e});this.createSticky()};t.extend(i,{tables:[]});t.extend(i.prototype,{minHeight:100,tableOffset:null,tableHeight:null,stickyVisible:!1,createSticky:function(){var e=this.$originalHeader.clone(!0);this.$stickyTable=t('<table class="sticky-header"/>').css({visibility:'hidden',position:'fixed',top:'0px'}).append(e).insertBefore(this.$originalTable);this.$stickyHeaderCells=e.find('> tr > th');this.recalculateSticky()},stickyPosition:function(t,e){var i={};if(typeof t==='number'){i.top=t+'px'};if(typeof e==='number'){i.left=(this.tableOffset.left-e)+'px'};return this.$stickyTable.css(i)},checkStickyVisible:function(){var i=a('scrollTop'),e=this.tableOffset.top-l.offsets.top,s=e+this.tableHeight,t=!1;if(e<i&&i<(s-this.minHeight)){t=!0};this.stickyVisible=t;return t},onScroll:function(t){this.checkStickyVisible();this.stickyPosition(null,a('scrollLeft'));this.$stickyTable.css('visibility',this.stickyVisible?'visible':'hidden')},recalculateSticky:function(e){this.tableHeight=this.$originalTable[0].clientHeight;l.offsets.top=l.calculateOffset('top');this.tableOffset=this.$originalTable.offset();this.stickyPosition(l.offsets.top,a('scrollLeft'));var i=null,n=null,s=null,c=this.$originalHeaderCells.length;for(var o=0;o<c;o++){i=t(this.$originalHeaderCells[o]);n=this.$stickyHeaderCells.eq(i.index());s=i.css('display');if(s!=='none'){n.css({width:i.css('width'),display:s})}
else{n.css('display','none')}};this.$stickyTable.css('width',this.$originalTable.outerWidth())}});e.TableHeader=i}(jQuery,Drupal,window.parent.Drupal.displace));