(function(t,e){'use strict';function i(){this.stack=[]};t.extend(i.prototype,{constrain:function(e){var r=this.stack.length;for(var n=0;n<r;n++){this.stack[n].deactivate()};var s=t(e).find(':tabbable').addBack(':tabbable'),i=new a({level:this.stack.length,$tabbableElements:s});this.stack.push(i);i.activate();t(document).trigger('drupalTabbingConstrained',i);return i},release:function(){var t=this.stack.length-1;while(t>=0&&this.stack[t].released){t--};this.stack.splice(t+1);if(t>=0){this.stack[t].activate()}},activate:function(e){var i=e.$tabbableElements,l=e.level,a=t(':tabbable').not(i);e.$disabledElements=a;var s=a.length;for(var n=0;n<s;n++){this.recordTabindex(a.eq(n),l)};a.prop('tabindex',-1).prop('autofocus',!1);var r=i.filter('[autofocus]').eq(-1);if(r.length===0){r=i.eq(0)};r.trigger('focus')},deactivate:function(t){var a=t.$disabledElements,n=t.level,i=a.length;for(var e=0;e<i;e++){this.restoreTabindex(a.eq(e),n)}},recordTabindex:function(t,e){var a=t.data('drupalOriginalTabIndices')||{};a[e]={tabindex:t[0].getAttribute('tabindex'),autofocus:t[0].hasAttribute('autofocus')};t.data('drupalOriginalTabIndices',a)},restoreTabindex:function(t,e){var a=t.data('drupalOriginalTabIndices');if(a&&a[e]){var n=a[e];if(n.tabindex){t[0].setAttribute('tabindex',n.tabindex)}
else{t[0].removeAttribute('tabindex')};if(n.autofocus){t[0].setAttribute('autofocus','autofocus')};if(e===0){t.removeData('drupalOriginalTabIndices')}
else{var i=e;while(a.hasOwnProperty(i)){delete a[i];i++};t.data('drupalOriginalTabIndices',a)}}}});function a(e){t.extend(this,{level:null,$tabbableElements:t(),$disabledElements:t(),released:!1,active:!1},e)};t.extend(a.prototype,{release:function(){if(!this.released){this.deactivate();this.released=!0;e.tabbingManager.release(this);t(document).trigger('drupalTabbingContextReleased',this)}},activate:function(){if(!this.active&&!this.released){this.active=!0;e.tabbingManager.activate(this);t(document).trigger('drupalTabbingContextActivated',this)}},deactivate:function(){if(this.active){this.active=!1;e.tabbingManager.deactivate(this);t(document).trigger('drupalTabbingContextDeactivated',this)}}});if(e.tabbingManager){return};e.tabbingManager=new i()}(jQuery,Drupal));