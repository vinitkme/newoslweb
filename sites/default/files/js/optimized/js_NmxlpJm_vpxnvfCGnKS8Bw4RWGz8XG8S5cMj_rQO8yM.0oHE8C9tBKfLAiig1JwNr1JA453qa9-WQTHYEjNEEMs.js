(function(i,e,o,t){'use strict';t.quickedit.FieldToolbarView=o.View.extend({$editedElement:null,editorView:null,_id:null,initialize:function(i){this.$editedElement=i.$editedElement;this.editorView=i.editorView;this.$root=this.$el;this._id='quickedit-toolbar-for-'+this.model.id.replace(/[\/\[\]]/g,'_');this.listenTo(this.model,'change:state',this.stateChange)},render:function(){this.setElement(i(t.theme('quickeditFieldToolbar',{id:this._id})));this.$el.prependTo(this.$root);return this},stateChange:function(i,e){var t=i.previous('state'),o=e;switch(o){case'inactive':break;case'candidate':if(t!=='inactive'&&t!=='highlighted'){this.$el.remove();this.setElement()};break;case'highlighted':break;case'activating':this.render();if(this.editorView.getQuickEditUISettings().fullWidthToolbar){this.$el.addClass('quickedit-toolbar-fullwidth')};if(this.editorView.getQuickEditUISettings().unifiedToolbar){this.insertWYSIWYGToolGroups()};break;case'active':break;case'changed':break;case'saving':break;case'saved':break;case'invalid':break}},insertWYSIWYGToolGroups:function(){this.$el.append(t.theme('quickeditToolgroup',{id:this.getFloatedWysiwygToolgroupId(),classes:['wysiwyg-floated','quickedit-animate-slow','quickedit-animate-invisible','quickedit-animate-delay-veryfast'],buttons:[]})).append(t.theme('quickeditToolgroup',{id:this.getMainWysiwygToolgroupId(),classes:['wysiwyg-main','quickedit-animate-slow','quickedit-animate-invisible','quickedit-animate-delay-veryfast'],buttons:[]}));this.show('wysiwyg-floated');this.show('wysiwyg-main')},getId:function(){return'quickedit-toolbar-for-'+this._id},getFloatedWysiwygToolgroupId:function(){return'quickedit-wysiwyg-floated-toolgroup-for-'+this._id},getMainWysiwygToolgroupId:function(){return'quickedit-wysiwyg-main-toolgroup-for-'+this._id},_find:function(i){return this.$el.find('.quickedit-toolgroup.'+i)},show:function(i){var e=this._find(i);e.on(t.quickedit.util.constants.transitionEnd,function(i){e.off(t.quickedit.util.constants.transitionEnd)});window.setTimeout(function(){e.removeClass('quickedit-animate-invisible')},0)}})})(jQuery,_,Backbone,Drupal);