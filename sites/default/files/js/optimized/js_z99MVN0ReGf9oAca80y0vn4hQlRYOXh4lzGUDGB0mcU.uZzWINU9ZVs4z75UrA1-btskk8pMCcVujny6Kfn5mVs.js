(function(e,a,i,t){'use strict';e.editors.ckeditor={attach:function(o,a){this._loadExternalPlugins(a);a.editorSettings.drupal={format:a.format};var n=t('label[for='+o.getAttribute('id')+']').html();a.editorSettings.title=e.t('Rich Text Editor, !label field',{'!label':n});return!!i.replace(o,a.editorSettings)},detach:function(e,t,a){var o=i.dom.element.get(e).getEditor();if(o){if(a==='serialize'){o.updateElement()}
else{o.destroy();e.removeAttribute('contentEditable')}};return!!o},onChange:function(e,t){var o=i.dom.element.get(e).getEditor();if(o){o.on('change',a(function(){t(o.getData())},400))};return!!o},attachInlineEditor:function(a,e,n,s){this._loadExternalPlugins(e);e.editorSettings.drupal={format:e.format};var o=t.extend(!0,{},e.editorSettings);if(n){var l={extraPlugins:'sharedspace',removePlugins:'floatingspace,elementspath',sharedSpaces:{top:n}};var c=!1;for(var r=0;!c&&r<o.toolbar.length;r++){if(o.toolbar[r]!=='/'){for(var d=0;!c&&d<o.toolbar[r].items.length;d++){if(o.toolbar[r].items[d]==='Source'){c=!0;o.toolbar[r].items[d]='Sourcedialog';l.extraPlugins+=',sourcedialog';l.removePlugins+=',sourcearea'}}}};o.extraPlugins+=','+l.extraPlugins;o.removePlugins+=','+l.removePlugins;o.sharedSpaces=l.sharedSpaces};a.setAttribute('contentEditable','true');return!!i.inline(a,o)},_loadExternalPlugins:function(e){var t=e.editorSettings.drupalExternalPlugins;if(t){for(var a in t){if(t.hasOwnProperty(a)){i.plugins.addExternal(a,t[a],'')}};delete e.editorSettings.drupalExternalPlugins}}};e.ckeditor={saveCallback:null,openDialog:function(a,o,n,l,r){var d=t(a.container.$);if(a.elementMode===i.ELEMENT_MODE_REPLACE){d=d.find('.cke_contents')};d.css('position','relative').find('.ckeditor-dialog-loading').remove();var s=r.dialogClass?r.dialogClass.split(' '):[];s.push('ui-dialog--narrow');r.dialogClass=s.join(' ');r.autoResize=window.matchMedia('(min-width: 600px)').matches;r.width='auto';var c=t('<div class="ckeditor-dialog-loading"><span style="top: -40px;" class="ckeditor-dialog-loading-link">'+e.t('Loading...')+'</span></div>');c.appendTo(d);var u=e.ajax({dialog:r,dialogType:'modal',selector:'.ckeditor-dialog-loading-link',url:o,progress:{type:'throbber'},submit:{editor_object:n}});u.execute();window.setTimeout(function(){c.find('span').animate({top:'0px'})},1000);e.ckeditor.saveCallback=l}};t(window).on('dialogcreate',function(e,a,o,n){t('.ui-dialog--narrow').css('zIndex',i.config.baseFloatZIndex+1)});t(window).on('dialog:beforecreate',function(e,i,a,o){t('.ckeditor-dialog-loading').animate({top:'-40px'},function(){t(this).remove()})});t(window).on('editor:dialogsave',function(i,t){if(e.ckeditor.saveCallback){e.ckeditor.saveCallback(t)}});t(window).on('dialog:afterclose',function(t,i,a){if(e.ckeditor.saveCallback){e.ckeditor.saveCallback=null}});function o(){var o=location.hash.substr(1),e=document.getElementById(o);if(e){var t=i.dom.element.get(e).getEditor();if(t){var a=t.container.getAttribute('id');location.replace('#'+a)}}};t(window).on('hashchange.ckeditor',o);i.timestamp=drupalSettings.ckeditor.timestamp})(Drupal,Drupal.debounce,CKEDITOR,jQuery);