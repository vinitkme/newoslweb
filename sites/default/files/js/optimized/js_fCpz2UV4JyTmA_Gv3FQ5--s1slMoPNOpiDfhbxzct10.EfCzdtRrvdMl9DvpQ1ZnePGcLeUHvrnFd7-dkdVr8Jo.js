(function(e,a,t){'use strict';a.behaviors.machineName={attach:function(t,i){var l=this,s=e(t),r=null,n=null;function c(e){var a=e.data;a.$wrapper.removeClass('visually-hidden');a.$target.trigger('focus');a.$suffix.hide();a.$source.off('.machineName')};function o(a){var i=a.data,t=i.options,s=e(a.target).val(),o=new RegExp(t.replace_pattern,'g'),c=s.toLowerCase().replace(o,t.replace).substr(0,t.maxlength);if(n&&n.readystate!==4){n.abort();n=null};if(r){clearTimeout(r);r=null};r=setTimeout(function(){if(s.toLowerCase()!==c){n=l.transliterate(s,t).done(function(e){l.showMachineName(e.substr(0,t.maxlength),i)})}
else{l.showMachineName(c,i)}},300)};Object.keys(i.machineName).forEach(function(n){var m='',u,r=i.machineName[n],p=s.find(n).addClass('machine-name-source').once('machine-name'),t=s.find(r.target).addClass('machine-name-target'),f=s.find(r.suffix),d=t.closest('.js-form-item');if(!p.length||!t.length||!f.length||!d.length){return};if(t.hasClass('error')){return};r.maxlength=t.attr('maxlength');d.addClass('visually-hidden');if(t.is(':disabled')||t.val()!==''){m=t.val()}
else if(p.val()!==''){m=l.transliterate(p.val(),r)};var h=e('<span class="machine-name-value">'+r.field_prefix+a.checkPlain(m)+r.field_suffix+'</span>');f.empty();if(r.label){f.append('<span class="machine-name-label">'+r.label+': </span>')};f.append(h);if(t.is(':disabled')){return};u={$source:p,$target:t,$suffix:f,$wrapper:d,$preview:h,options:r};var g=e('<span class="admin-link"><button type="button" class="link">'+a.t('Edit')+'</button></span>').on('click',u,c);f.append(g);if(t.val()===''){p.on('formUpdated.machineName',u,o).trigger('formUpdated.machineName')};t.on('invalid',u,c)})},showMachineName:function(e,t){var n=t.options;if(e!==''){if(e!==n.replace){t.$target.val(e);t.$preview.html(n.field_prefix+a.checkPlain(e)+n.field_suffix)};t.$suffix.show()}
else{t.$suffix.hide();t.$target.val(e);t.$preview.empty()}},transliterate:function(n,i){return e.get(a.url('machine_name/transliterate'),{text:n,langcode:t.langcode,replace_pattern:i.replace_pattern,replace_token:i.replace_token,replace:i.replace,lowercase:!0})}}})(jQuery,Drupal,drupalSettings);