(function(t,a){'use strict';var e;function c(e){var r=[],n=!1,a='',c=e.length,o;for(var i=0;i<c;i++){o=e.charAt(i);if(o==='"'){a+=o;n=!n}
else if(o===','&&!n){r.push(a.trim());a=''}
else{a+=o}};if(e.length>0){r.push(t.trim(a))};return r};function i(t){return e.splitValues(t).pop()};function s(t){var a=e.options;if(a.isComposing){return!1};var o=e.extractLastTerm(t.target.value);if(o.length>0&&a.firstCharacterBlacklist.indexOf(o[0])!==-1){return!1};return o.length>=a.minLength};function u(a,n){var o=this.element.attr('id');if(!(o in e.cache)){e.cache[o]={}};function i(t){var i=e.splitValues(a.term),c=i.length;for(var o=0;o<c;o++){var r=t.indexOf(i[o]);if(r>=0){t.splice(r,1)}};n(t)};function c(t){e.cache[o][r]=t;i(t)};var r=e.extractLastTerm(a.term);if(e.cache[o].hasOwnProperty(r)){i(e.cache[o][r])}
else{var s=t.extend({success:c,data:{q:r}},e.ajax);t.ajax(this.element.attr('data-autocomplete-path'),s)}};function r(){return!1};function o(t,a){var o=e.splitValues(t.target.value);o.pop();if(a.item.value.search(',')>0){o.push('"'+a.item.value+'"')}
else{o.push(a.item.value)};t.target.value=o.join(', ');return!1};function n(e,a){return t('<li>').append(t('<a>').html(a.label)).appendTo(e)};a.behaviors.autocomplete={attach:function(a){var o=t(a).find('input.form-autocomplete').once('autocomplete');if(o.length){var n=o.attr('data-autocomplete-first-character-blacklist');t.extend(e.options,{firstCharacterBlacklist:(n)?n:''});o.autocomplete(e.options).each(function(){t(this).data('ui-autocomplete')._renderItem=e.options.renderItem});o.on('compositionstart.autocomplete',function(){e.options.isComposing=!0});o.on('compositionend.autocomplete',function(){e.options.isComposing=!1})}},detach:function(e,a,o){if(o==='unload'){t(e).find('input.form-autocomplete').removeOnce('autocomplete').autocomplete('destroy')}}};e={cache:{},splitValues:c,extractLastTerm:i,options:{source:u,focus:r,search:s,select:o,renderItem:n,minLength:1,firstCharacterBlacklist:'',isComposing:!1},ajax:{dataType:'json'}};a.autocomplete=e})(jQuery,Drupal);