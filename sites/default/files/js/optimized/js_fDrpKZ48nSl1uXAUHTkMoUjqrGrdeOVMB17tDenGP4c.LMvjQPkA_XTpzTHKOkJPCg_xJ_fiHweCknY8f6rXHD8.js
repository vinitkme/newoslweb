(function(e,r,n,a){'use strict';var s=parseInt(n.user.uid,10),i=Math.round(new Date().getTime()/1000)-30*24*60*60,t=!1;if(n.history&&n.history.lastReadTimestamps){t=n.history.lastReadTimestamps};r.history={fetchTimestamps:function(n,i){if(t){i();return};e.ajax({url:r.url('history/get_node_read_timestamps'),type:'POST',data:{'node_ids[]':n},dataType:'json',success:function(t){for(var e in t){if(t.hasOwnProperty(e)){a.setItem('Drupal.history.'+s+'.'+e,t[e])}};i()}})},getLastRead:function(e){if(t&&t[e]){return parseInt(t[e],10)};return parseInt(a.getItem('Drupal.history.'+s+'.'+e)||0,10)},markAsRead:function(n){e.ajax({url:r.url('history/'+n+'/read'),type:'POST',dataType:'json',success:function(e){if(t&&t[n]){return};a.setItem('Drupal.history.'+s+'.'+n,e)}})},needsServerCheck:function(e,r){if(r<i){return!1};if(t&&t[e]){return r>parseInt(t[e],10)};var n=parseInt(a.getItem('Drupal.history.'+s+'.'+e)||0,10);return r>n}}})(jQuery,Drupal,drupalSettings,window.localStorage);