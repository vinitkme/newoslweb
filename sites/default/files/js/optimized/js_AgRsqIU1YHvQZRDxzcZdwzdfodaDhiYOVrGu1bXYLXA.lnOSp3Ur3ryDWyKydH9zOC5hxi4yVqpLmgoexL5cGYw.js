(function(t,i,e){'use strict';e.quickedit.FieldModel=e.quickedit.BaseModel.extend({defaults:{el:null,fieldID:null,id:null,entity:null,metadata:null,acceptStateChange:null,logicalFieldID:null,state:'inactive',isChanged:!1,inTempStore:!1,html:null,htmlForOtherViewModes:null},initialize:function(t){this.set('html',t.el.outerHTML);this.get('entity').get('fields').add(this);this.set('logicalFieldID',this.get('fieldID').split('/').slice(0,4).join('/'));e.quickedit.BaseModel.prototype.initialize.call(this,t)},destroy:function(t){if(this.get('state')!=='inactive'){throw new Error('FieldModel cannot be destroyed if it is not inactive state.')};e.quickedit.BaseModel.prototype.destroy.call(this,t)},sync:function(){return},validate:function(e,l){var n=this.get('state'),i=e.state;if(n!==i){if(t.indexOf(this.constructor.states,i)===-1){return'"'+i+'" is an invalid state'};if(!this.get('acceptStateChange')(n,i,l,this)){return'state change not accepted'}}},getEntityID:function(){return this.get('fieldID').split('/').slice(0,2).join('/')},getViewMode:function(){return this.get('fieldID').split('/').pop()},findOtherViewModes:function(){var t=this,i=[];e.quickedit.collections.fields.where({logicalFieldID:t.get('logicalFieldID')}).forEach(function(e){if(e===t){return}
else if(e.get('fieldID')===t.get('fieldID')){return}
else{i.push(e.getViewMode())}});return i}},{states:['inactive','candidate','highlighted','activating','active','changed','saving','saved','invalid'],followsStateSequence:function(e,i){return t.indexOf(this.states,e)<t.indexOf(this.states,i)}});e.quickedit.FieldCollection=i.Collection.extend({model:e.quickedit.FieldModel})}(_,Backbone,Drupal));