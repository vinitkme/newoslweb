(function(e,i,t){'use strict';i.viewsUi={};i.behaviors.viewsUiEditView={attach:function(){e('[data-drupal-selector="edit-query-options-disable-sql-rewrite"]').on('click',function(){e('.sql-rewrite-warning').toggleClass('js-hide')})}};i.behaviors.viewsUiAddView={attach:function(t){var s=e(t),d=new RegExp('[^a-z0-9\\-]+','g'),l='-',a,r=s.find('[id^="edit-page-title"], [id^="edit-block-title"], [id^="edit-page-link-properties-title"]');if(r.length){if(!this.fieldsFiller){this.fieldsFiller=new i.viewsUi.FormFieldFiller(r)}
else{this.fieldsFiller.rebind(r)}};var n=s.find('[id^="edit-page-path"]');if(n.length){if(!this.pathFiller){this.pathFiller=new i.viewsUi.FormFieldFiller(n,d,l)}
else{this.pathFiller.rebind(n)}};var o=s.find('[id^="edit-page-feed-properties-path"]');if(o.length){if(!this.feedFiller){a='.xml';this.feedFiller=new i.viewsUi.FormFieldFiller(o,d,l,a)}
else{this.feedFiller.rebind(o)}}}};i.viewsUi.FormFieldFiller=function(i,t,s,n){this.source=e('#edit-label');this.target=i;this.exclude=t||!1;this.replace=s||'';this.suffix=n||'';var r=this;this.populate=function(){return r._populate.call(r)};this.unbind=function(){return r._unbind.call(r)};this.bind()};e.extend(i.viewsUi.FormFieldFiller.prototype,{bind:function(){this.unbind();this.source.on('keyup.viewsUi change.viewsUi',this.populate);this.target.on('focus.viewsUi',this.unbind)},getTransliterated:function(){var e=this.source.val();if(this.exclude){e=e.toLowerCase().replace(this.exclude,this.replace)};return e},_populate:function(){var t=this.getTransliterated(),i=this.suffix;this.target.each(function(r){var s=e(this).attr('maxlength')-i.length;e(this).val(t.substr(0,s)+i)})},_unbind:function(){this.source.off('keyup.viewsUi change.viewsUi',this.populate);this.target.off('focus.viewsUi',this.unbind)},rebind:function(e){this.target=e;this.bind()}});i.behaviors.addItemForm={attach:function(t){var s=e(t),r=s;if(!s.is('form[id^="views-ui-add-handler-form"]')){r=s.find('form[id^="views-ui-add-handler-form"]')};if(r.once('views-ui-add-handler-form').length){new i.viewsUi.AddItemForm(r)}}};i.viewsUi.AddItemForm=function(i){this.$form=i;this.$form.find('.views-filterable-options :checkbox').on('click',e.proxy(this.handleCheck,this));this.$selected_div=this.$form.find('.views-selected-options').parent();this.$selected_div.hide();this.checkedItems=[]};i.viewsUi.AddItemForm.prototype.handleCheck=function(i){var r=e(i.target),s=e.trim(r.closest('td').next().html());if(r.is(':checked')){this.$selected_div.show().css('display','block');this.checkedItems.push(s)}
else{var n=e.inArray(s,this.checkedItems);for(var t=0;t<this.checkedItems.length;t++){if(t===n){this.checkedItems.splice(t,1);t--;break}};if(this.checkedItems.length===0){this.$selected_div.hide()}};this.refreshCheckedItems()};i.viewsUi.AddItemForm.prototype.refreshCheckedItems=function(){this.$selected_div.find('.views-selected-options').html(this.checkedItems.join(', ')).trigger('dialogContentResize')};i.behaviors.viewsUiRenderAddViewButton={attach:function(t){var r=e(t).find('#views-display-menu-tabs').once('views-ui-render-add-view-button');if(!r.length){return};var s=e('<li class="add"><a href="#"><span class="icon add"></span>'+i.t('Add')+'</a><ul class="action-list" style="display:none;"></ul></li>'),n=r.nextAll('input.add-display').detach();n.appendTo(s.find('.action-list')).wrap('<li>').parent().eq(0).addClass('first').end().eq(-1).addClass('last');n.each(function(){var i=e(this).val();if(i.substr(0,4)==='Add '){e(this).val(i.substr(4))}});s.appendTo(r);r.find('li.add > a').on('click',function(t){t.preventDefault();var r=e(this);i.behaviors.viewsUiRenderAddViewButton.toggleMenu(r)});e('li.add',r).on('mouseleave',function(t){var r=e(this),s=r.children('a[href="#"]');if(r.children('.action-list').is(':visible')){i.behaviors.viewsUiRenderAddViewButton.toggleMenu(s)}})}};i.behaviors.viewsUiRenderAddViewButton.toggleMenu=function(e){e.parent().toggleClass('open');e.next().slideToggle('fast')};i.behaviors.viewsUiSearchOptions={attach:function(t){var s=e(t),r=s;if(!s.is('form[id^="views-ui-add-handler-form"]')){r=s.find('form[id^="views-ui-add-handler-form"]')};if(r.once('views-ui-filter-options').length){new i.viewsUi.OptionsSearch(r)}}};i.viewsUi.OptionsSearch=function(i){this.$form=i;this.$form.on('click','td.title',function(i){var t=e(i.currentTarget);t.closest('tr').find('input').trigger('click')});var r='[data-drupal-selector="edit-override-controls-options-search"]',t='[data-drupal-selector="edit-override-controls-group"]';this.$form.on('formUpdated',r+','+t,e.proxy(this.handleFilter,this));this.$searchBox=this.$form.find(r);this.$controlGroup=this.$form.find(t);this.options=this.getOptions(this.$form.find('.filterable-option'));this.$searchBox.on('keypress',function(e){if(e.which===13){e.preventDefault()}})};e.extend(i.viewsUi.OptionsSearch.prototype,{getOptions:function(i){var o,n,r,s=[],a=i.length;for(var t=0;t<a;t++){r=e(i[t]);o=r.find('label');n=r.find('.description');s[t]={searchText:o.text().toLowerCase()+' '+n.text().toLowerCase(),$div:r}};return s},handleFilter:function(i){var r=this.$searchBox.val().toLowerCase(),s=r.split(' '),t=this.$controlGroup.val();this.options.forEach(function(e){function n(i){return e.searchText.indexOf(i)!==-1};var i=!0;if(r){i=s.every(n)};if(i&&t!=='all'){i=e.$div.hasClass(t)};e.$div.toggle(i)});e(i.target).trigger('dialogContentResize')}});i.behaviors.viewsUiPreview={attach:function(i){var t=e(i).find('.views-display-column .views-ui-display-tab-bucket.argument');if(t.length===0){return};var r=t.find('.views-display-setting a');if(r.length){e('#preview-args').parent().show()}
else{e('#preview-args').parent().hide()};if(e('#edit-displays-live-preview').once('edit-displays-live-preview').is(':checked')){e('#preview-submit').once('edit-displays-live-preview').trigger('click')}}};i.behaviors.viewsUiRearrangeFilter={attach:function(t){if(typeof i.tableDrag==='undefined'||typeof i.tableDrag['views-rearrange-filters']==='undefined'){return};var s=e(t),r=s.find('#views-rearrange-filters').once('views-rearrange-filters'),n=s.find('.js-form-item-filter-groups-operator').once('views-rearrange-filters');if(r.length){new i.viewsUi.RearrangeFilterHandler(r,n)}}};i.viewsUi.RearrangeFilterHandler=function(i,t){this.table=i;this.operator=t;this.hasGroupOperator=this.operator.length>0;this.draggableRows=i.find('.draggable');this.addGroupButton=e('input#views-add-group');this.removeGroupButtons=i.find('input.views-remove-group');this.insertAddRemoveFilterGroupLinks();if(this.hasGroupOperator){this.dropdowns=this.duplicateGroupsOperator();this.syncGroupsOperators()};this.modifyTableDrag();this.redrawOperatorLabels();i.find('.views-group-title select').once('views-rearrange-filter-handler').on('change.views-rearrange-filter-handler',e.proxy(this,'redrawOperatorLabels'));i.find('a.views-groups-remove-link').once('views-rearrange-filter-handler').on('click.views-rearrange-filter-handler',e.proxy(this,'updateRowspans')).on('click.views-rearrange-filter-handler',e.proxy(this,'redrawOperatorLabels'))};e.extend(i.viewsUi.RearrangeFilterHandler.prototype,{insertAddRemoveFilterGroupLinks:function(){e('<ul class="action-links"><li><a id="views-add-group-link" href="#">'+this.addGroupButton.val()+'</a></li></ul>').prependTo(this.table.parent()).once('views-rearrange-filter-handler').on('click.views-rearrange-filter-handler',e.proxy(this,'clickAddGroupButton'));var n=this.removeGroupButtons.length,t;for(t=0;t<n;t++){var r=e(this.removeGroupButtons[t]),s=r.attr('id');e('<a href="#" class="views-remove-group-link">'+i.t('Remove group')+'</a>').insertBefore(r).once('views-rearrange-filter-handler').on('click.views-rearrange-filter-handler',{buttonId:s},e.proxy(this,'clickRemoveGroupButton'))}},clickAddGroupButton:function(e){this.addGroupButton.trigger('mousedown');e.preventDefault()},clickRemoveGroupButton:function(e){this.table.find('#'+e.data.buttonId).trigger('mousedown');e.preventDefault()},duplicateGroupsOperator:function(){var s,i,t,r=e('tr.views-group-title').once('duplicateGroupsOperator');if(!r.length){return this.operator};this.operator.find('label').add('div.description').addClass('visually-hidden');this.operator.find('select').addClass('form-select');s=this.operator;t=e('tr#views-group-title-2');i=e('<tr class="filter-group-operator-row"><td colspan="5"></td></tr>');i.find('td').append(this.operator);i.insertBefore(t);var a=r.length;for(var o=2;o<a;o++){t=e(r[o]);var n=this.operator.clone();n.attr('id','');i=e('<tr class="filter-group-operator-row"><td colspan="5"></td></tr>');i.find('td').append(n);i.insertBefore(t);s.add(n)};return s},syncGroupsOperators:function(){if(this.dropdowns.length<2){return};this.dropdowns.on('change',e.proxy(this,'operatorChangeHandler'))},operatorChangeHandler:function(i){var t=e(i.target),r=this.dropdowns.find('select').not(t);r.val(t.val())},modifyTableDrag:function(){var r=i.tableDrag['views-rearrange-filters'],t=this;r.row.prototype.onSwap=function(){if(t.hasGroupOperator){var r=e(this.group),i=r.prev('tr');if(i.length&&!i.hasClass('group-message')&&!i.hasClass('draggable')){var s=r.next();if(s.is('tr')){this.swap('after',s)}};t.updateRowspans()};t.redrawOperatorLabels()};r.onDrop=function(){var t=e(this.oldRowElement).find('.tabledrag-changed');if(t.length){var s=t.prevAll('.views-operator-label');if(s.length){s.insertAfter(t)}};var n=e(this.rowObject.element).prevAll('tr.group-message').get(0),r=n.className.replace(/([^ ]+[ ]+)*group-([^ ]+)-message([ ]+[^ ]+)*/,'$2'),i=e('select.views-group-select',this.rowObject.element);if(e(this.rowObject.element).prev('tr').is('.group-message')&&!i.is('.views-group-select-'+r)){var o=i.attr('class').replace(/([^ ]+[ ]+)*views-group-select-([^ ]+)([ ]+[^ ]+)*/,'$2');i.removeClass('views-group-select-'+o).addClass('views-group-select-'+r);i.val(r)}}},redrawOperatorLabels:function(){for(var t=0;t<this.draggableRows.length;t++){var r=e(this.draggableRows[t]),i=r.find('td').eq(0);if(i.length){var a=r.prevAll('.views-group-title').find('option:selected').html(),n='<span class="views-operator-label">'+a+'</span>',o=r.nextAll(':visible').eq(0),s=i.find('.views-operator-label');if(o.hasClass('draggable')){if(s.length){s.replaceWith(n)}
else{i.append(n)}}
else{s.remove()}}}},updateRowspans:function(){var i,n,s,t,o=e(this.table).find('tr'),a=o.length;for(var r=0;r<a;r++){i=e(o[r]);if(i.hasClass('views-group-title')){t=i.find('td.group-operator');s=0;n=i.next('tr');n.removeClass('group-populated').addClass('group-empty');t.attr('rowspan',2)}
else if(i.hasClass('draggable')&&i.is(':visible')){s++;n.removeClass('group-empty').addClass('group-populated');t.attr('rowspan',s+1)}}}});i.behaviors.viewsFilterConfigSelectAll={attach:function(i){var n=e(i),t=n.find('.js-form-item-options-value-all').once('filterConfigSelectAll'),s=t.find('input[type=checkbox]'),r=t.closest('.form-checkboxes').find('.js-form-type-checkbox:not(.js-form-item-options-value-all) input[type="checkbox"]');if(t.length){t.show();s.on('click',function(){r.prop('checked',e(this).is(':checked'))});r.on('click',function(){if(e(this).is('checked')===!1){s.prop('checked',!1)}})}}};i.behaviors.viewsRemoveIconClass={attach:function(i){e(i).find('.dropbutton').once('dropbutton-icon').find('.icon').removeClass('icon')}};i.behaviors.viewsUiCheckboxify={attach:function(t,s){var n=e('[data-drupal-selector="edit-options-expose-button-button"], [data-drupal-selector="edit-options-group-button-button"]').once('views-ui-checkboxify'),o=n.length,r;for(r=0;r<o;r++){new i.viewsUi.Checkboxifier(n[r])}}};i.behaviors.viewsUiChangeDefaultWidget={attach:function(i){var t=e(i);function r(i){if(e(i.target).prop('checked')){t.find('input.default-radios').parent().hide();t.find('td.any-default-radios-row').parent().hide();t.find('input.default-checkboxes').parent().show()}
else{t.find('input.default-checkboxes').parent().hide();t.find('td.any-default-radios-row').parent().show();t.find('input.default-radios').parent().show()}};t.find('input[name="options[group_info][multiple]"]').on('change',r).trigger('change')}};i.viewsUi.Checkboxifier=function(i){this.$button=e(i);this.$parent=this.$button.parent('div.views-expose, div.views-grouped');this.$input=this.$parent.find('input:checkbox, input:radio');this.$button.hide();this.$parent.find('.exposed-description, .grouped-description').hide();this.$input.on('click',e.proxy(this,'clickHandler'))};i.viewsUi.Checkboxifier.prototype.clickHandler=function(e){this.$button.trigger('click').trigger('submit')};i.behaviors.viewsUiOverrideSelect={attach:function(t){e(t).find('[data-drupal-selector="edit-override-dropdown"]').once('views-ui-override-button-text').each(function(){var s=e(t),r=s.find('[id^=edit-submit]'),n=r.val();r.once('views-ui-override-button-text').on('mouseup',function(){e(this).val(n);return!0});e(this).on('change',function(){var t=e(this);if(t.val()==='default'){r.val(i.t('Apply (all displays)'))}
else if(t.val()==='default_revert'){r.val(i.t('Revert to default'))}
else{r.val(i.t('Apply (this display)'))};var n=s.closest('.ui-dialog-content');n.trigger('dialogButtonsChange')}).trigger('change')})}};i.behaviors.viewsUiHandlerRemoveLink={attach:function(i){var t=e(i);t.find('a.views-remove-link').once('views').on('click',function(i){var r=e(this).attr('id').replace('views-remove-link-','');t.find('#views-row-'+r).hide();t.find('#views-removed-'+r).prop('checked',!0);i.preventDefault()});t.find('a.display-remove-link').once('display').on('click',function(i){var r=e(this).attr('id').replace('display-remove-link-','');t.find('#display-row-'+r).hide();t.find('#display-removed-'+r).prop('checked',!0);i.preventDefault()})}}})(jQuery,Drupal,drupalSettings);