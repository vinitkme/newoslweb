(function(e,i,t){'use strict';t.quickedit.editors.plain_text=t.quickedit.EditorView.extend({$textElement:null,initialize:function(a){t.quickedit.EditorView.prototype.initialize.call(this,a);var n=this.model,l=this.fieldModel,i,r=this.$el.find('.quickedit-field');if(r.length){i=this.$textElement=r.eq(0)}
else{i=this.$textElement=this.$el};n.set('originalValue',e.trim(this.$textElement.text()));var s=n.get('originalValue');i.on('keyup paste',function(a){var t=e.trim(i.text());if(s!==t){s=t;n.set('currentValue',t);l.set('state','changed')}})},getEditedElement:function(){return this.$textElement},stateChange:function(e,n,a){var t=e.previous('state'),r=n;switch(r){case'inactive':break;case'candidate':if(t!=='inactive'){this.$textElement.removeAttr('contenteditable')};if(t==='invalid'){this.removeValidationErrors()};break;case'highlighted':break;case'activating':i.defer(function(){e.set('state','active')});break;case'active':this.$textElement.attr('contenteditable','true');break;case'changed':break;case'saving':if(t==='invalid'){this.removeValidationErrors()};this.save(a);break;case'saved':break;case'invalid':this.showValidationErrors();break}},getQuickEditUISettings:function(){return{padding:!0,unifiedToolbar:!1,fullWidthToolbar:!1,popup:!1}},revert:function(){this.$textElement.html(this.model.get('originalValue'))}})})(jQuery,_,Drupal);;
(function(e,i,t){'use strict';i.quickedit.editors.form=i.quickedit.EditorView.extend({$formContainer:null,formSaveAjax:null,stateChange:function(i,e){var t=i.previous('state'),a=e;switch(a){case'inactive':break;case'candidate':if(t!=='inactive'){this.removeForm()};break;case'highlighted':break;case'activating':if(t!=='invalid'){this.loadForm()};break;case'active':break;case'changed':break;case'saving':this.save();break;case'saved':break;case'invalid':this.showValidationErrors();break}},getQuickEditUISettings:function(){return{padding:!0,unifiedToolbar:!0,fullWidthToolbar:!0,popup:!0}},loadForm:function(){var t=this.fieldModel,o='quickedit-form-for-'+t.id.replace(/[\/\[\]]/g,'_'),a=this.$formContainer=e(i.theme('quickeditFormContainer',{id:o,loadingMsg:i.t('Loadingâ€¦')}));a.find('.quickedit-form').addClass('quickedit-editable quickedit-highlighted quickedit-editing').attr('role','dialog');if(this.$el.css('display')==='inline'){a.prependTo(this.$el.offsetParent());var r=this.$el.position();a.css('left',r.left).css('top',r.top)}
else{a.insertBefore(this.$el)};var n={fieldID:t.get('fieldID'),$el:this.$el,nocssjs:!1,reset:!t.get('entity').get('inTempStore')};i.quickedit.util.form.load(n,function(e,r){i.AjaxCommands.prototype.insert(r,{data:e,selector:'#'+o+' .placeholder'});a.on('formUpdated.quickedit',':input',function(i){var e=t.get('state');if(e==='invalid'){t.set('state','activating')}
else{t.set('state','changed')}}).on('keypress.quickedit','input',function(i){if(i.keyCode===13){return!1}});t.set('state','active')})},removeForm:function(){if(this.$formContainer===null){return};delete this.formSaveAjax;i.detachBehaviors(this.$formContainer.get(0),null,'unload');this.$formContainer.off('change.quickedit',':input').off('keypress.quickedit','input').remove();this.$formContainer=null},save:function(){var r=this.$formContainer,o=r.find('.quickedit-form-submit'),s=this.model,e=this.fieldModel;function n(){i.quickedit.util.form.unajaxifySaving(a);a=null};var a=i.quickedit.util.form.ajaxifySaving({nocssjs:!1,other_view_modes:e.findOtherViewModes()},o);a.commands.quickeditFieldFormSaved=function(i,a,o){n();e.set('state','saved');e.set('htmlForOtherViewModes',a.other_view_modes);t.defer(function(){e.set('html',a.data)})};a.commands.quickeditFieldFormValidationErrors=function(i,t,a){s.set('validationErrors',t.data);e.set('state','invalid')};a.commands.quickeditFieldForm=function(e,t,a){i.AjaxCommands.prototype.insert(e,{data:t.data,selector:'#'+r.attr('id')+' form'})};o.trigger('click.quickedit')},showValidationErrors:function(){this.$formContainer.find('.quickedit-form').addClass('quickedit-validation-error').find('form').prepend(this.model.get('validationErrors'))}})})(jQuery,Drupal,_);;
