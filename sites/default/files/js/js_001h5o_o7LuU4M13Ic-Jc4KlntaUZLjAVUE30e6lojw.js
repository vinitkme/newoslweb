(function(e,t,o,r){'use strict';t.ckeditor=t.ckeditor||{};t.behaviors.ckeditorAdmin={attach:function(r){var a=e(r).find('.ckeditor-toolbar-configuration').once('ckeditor-configuration');if(a.length){var n=a.find('.js-form-item-editor-settings-toolbar-button-groups').hide().find('textarea');a.append(o.ckeditor.toolbarAdmin);var d=t.ckeditor.models.Model=new t.ckeditor.Model({$textarea:n,activeEditorConfig:JSON.parse(n.val()),hiddenEditorConfig:o.ckeditor.hiddenCKEditorConfig});var i={model:d,el:e('.ckeditor-toolbar-configuration')};t.ckeditor.views={controller:new t.ckeditor.ControllerView(i),visualView:new t.ckeditor.VisualView(i),keyboardView:new t.ckeditor.KeyboardView(i),auralView:new t.ckeditor.AuralView(i)}}},detach:function(o,r,i){if(i!=='unload'){return};var d=e(o).find('.ckeditor-toolbar-configuration').findOnce('ckeditor-configuration');if(d.length&&t.ckeditor.models&&t.ckeditor.models.Model){var c=t.ckeditor.models.Model.toJSON().activeEditorConfig,n=t.ckeditor.views.controller.getButtonList(c),l=e('.ckeditor-toolbar-configuration').find('.ckeditor-toolbar-active');for(var a=0;a<n.length;a++){l.trigger('CKEditorToolbarChanged',['removed',n[a]])}}}};t.ckeditor={views:{},models:{},registerButtonMove:function(e,o,r){var i=o.closest('.ckeditor-toolbar-group');if(i.hasClass('placeholder')){if(e.isProcessing){return};e.isProcessing=!0;t.ckeditor.openGroupNameDialog(e,i,r)}
else{e.model.set('isDirty',!0);r(!0)}},registerGroupMove:function(t,o){var r=o.closest('.ckeditor-row');if(r.hasClass('placeholder')){r.removeClass('placeholder')};r.parent().children().each(function(){r=e(this);if(r.find('.ckeditor-toolbar-group').not('.placeholder').length===0){r.addClass('placeholder')}});t.model.set('isDirty',!0)},openGroupNameDialog:function(r,o,i){i=i||function(){};function l(o){if(o.elements[0].value.length===0){var r=e(o);if(!r.hasClass('errors')){r.addClass('errors').find('input').addClass('error').attr('aria-invalid','true');e('<div class="description" >'+t.t('Please provide a name for the button group.')+'</div>').insertAfter(o.elements[0])};return!0};return!1};function a(e,a){function d(){n.close(e);delete r.isProcessing};function c(e,o){if(e.hasClass('placeholder')){var r='ckeditor-toolbar-group-aria-label-for-'+t.checkPlain(o.toLowerCase().replace(/\s/g,'-'));e.removeAttr('aria-label').attr('data-drupal-ckeditor-type','group').attr('tabindex',0).children('.ckeditor-toolbar-group-name').attr('id',r).end().children('.ckeditor-toolbar-group-buttons').attr('aria-labelledby',r)};e.attr('data-drupal-ckeditor-toolbar-group-name',o).children('.ckeditor-toolbar-group-name').text(o)};if(e==='cancel'){d();i(!1,o);return};if(a&&l(a)){return};if(e==='apply'){d();c(o,t.checkPlain(a.elements[0].value));o.closest('.ckeditor-row.placeholder').addBack().removeClass('placeholder');i(!0,o);r.model.set('isDirty',!0)}};var d=e(t.theme('ckeditorButtonGroupNameForm')),n=t.dialog(d.get(0),{title:t.t('Button group name'),dialogClass:'ckeditor-name-toolbar-group',resizable:!1,buttons:[{text:t.t('Apply'),click:function(){a('apply',this)},primary:!0},{text:t.t('Cancel'),click:function(){a('cancel')}}],open:function(){var n=this,d=e(this),i=d.parent();i.find('.ui-dialog-titlebar-close').remove();i.on('keypress.ckeditor','input, button',function(t){if(t.keyCode===13){var i=e(t.currentTarget),o=i.data('ui-button'),r='apply';if(o&&o.options&&o.options.label){r=o.options.label.toLowerCase()};a(r,n);t.stopPropagation();t.stopImmediatePropagation();t.preventDefault()}});var r=t.t('Editing the name of the new button group in a dialog.');if(typeof o.attr('data-drupal-ckeditor-toolbar-group-name')!=='undefined'){r=t.t('Editing the name of the "@groupName" button group in a dialog.',{'@groupName':o.attr('data-drupal-ckeditor-toolbar-group-name')})};t.announce(r)},close:function(t){e(t.target).remove()}});n.showModal();e(document.querySelector('.ckeditor-name-toolbar-group').querySelector('input')).attr('value',o.attr('data-drupal-ckeditor-toolbar-group-name')).trigger('focus')}};t.behaviors.ckeditorAdminButtonPluginSettings={attach:function(t){var r=e(t),o=r.find('#ckeditor-plugin-settings').once('ckeditor-plugin-settings');if(o.length){o.find('[data-ckeditor-buttons]').each(function(){var t=e(this);if(t.data('verticalTab')){t.data('verticalTab').tabHide()}
else{t.hide()};t.data('ckeditorButtonPluginSettingsActiveButtons',[])});r.find('.ckeditor-toolbar-active').off('CKEditorToolbarChanged.ckeditorAdminPluginSettings').on('CKEditorToolbarChanged.ckeditorAdminPluginSettings',function(t,e,r){var i=o.find('[data-ckeditor-buttons~='+r+']');if(i.length===0){return};var n=i.data('verticalTab'),a=i.data('ckeditorButtonPluginSettingsActiveButtons');if(e==='added'){a.push(r);if(n){n.tabShow()}
else{i.show()}}
else{a.splice(a.indexOf(r),1);if(a.length===0){if(n){n.tabHide()}
else{i.hide()}}};i.data('ckeditorButtonPluginSettingsActiveButtons',a)})}}};t.theme.ckeditorRow=function(){return'<li class="ckeditor-row placeholder" role="group"><ul class="ckeditor-toolbar-groups clearfix"></ul></li>'};t.theme.ckeditorToolbarGroup=function(){var e='';e+='<li class="ckeditor-toolbar-group placeholder" role="presentation" aria-label="'+t.t('Place a button to create a new button group.')+'">';e+='<h3 class="ckeditor-toolbar-group-name">'+t.t('New group')+'</h3>';e+='<ul class="ckeditor-buttons ckeditor-toolbar-group-buttons" role="toolbar" data-drupal-ckeditor-button-sorting="target"></ul>';e+='</li>';return e};t.theme.ckeditorButtonGroupNameForm=function(){return'<form><input name="group-name" required="required"></form>'};t.theme.ckeditorButtonGroupNamesToggle=function(){return'<button class="link ckeditor-groupnames-toggle" aria-pressed="false"></button>'};t.theme.ckeditorNewButtonGroup=function(){return'<li class="ckeditor-add-new-group"><button aria-label="'+t.t('Add a CKEditor button group to the end of this row.')+'">'+t.t('Add group')+'</button></li>'}})(jQuery,Drupal,drupalSettings,_);;
(function(e,t){'use strict';e.ckeditor.Model=t.Model.extend({defaults:{activeEditorConfig:null,$textarea:null,isDirty:!1,hiddenEditorConfig:null,buttonsToFeatures:null,featuresMetadata:null,groupNamesVisible:!1},sync:function(){this.get('$textarea').val(JSON.stringify(this.get('activeEditorConfig')))}})})(Drupal,Backbone);;
(function(t,e,o){'use strict';t.ckeditor.AuralView=e.View.extend({events:{'click .ckeditor-buttons a':'announceButtonHelp','click .ckeditor-multiple-buttons a':'announceSeparatorHelp','focus .ckeditor-button a':'onFocus','focus .ckeditor-button-separator a':'onFocus','focus .ckeditor-toolbar-group':'onFocus'},initialize:function(){this.listenTo(this.model,'change:isDirty',this.announceMove)},announceMove:function(t,a){if(!a){var n=document.activeElement||null;if(n){var e=o(n);if(e.hasClass('ckeditor-toolbar-group')){this.announceButtonGroupPosition(e)}
else if(e.parent().hasClass('ckeditor-button')){this.announceButtonPosition(e.parent())}}}},onFocus:function(t){t.stopPropagation();var a=o(t.target),e=o(t.currentTarget),n=e.parent();if(n.hasClass('ckeditor-button')||n.hasClass('ckeditor-button-separator')){this.announceButtonPosition(e.parent())}
else if(a.attr('role')!=='button'&&e.hasClass('ckeditor-toolbar-group')){this.announceButtonGroupPosition(e)}},announceButtonGroupPosition:function(o){var i=o.parent().children(),s=o.closest('.ckeditor-row'),u=s.parent().children(),r=i.index(o)+1,l=i.not('.placeholder').length,n=u.index(s)+1,a=u.not('.placeholder').length,e=t.t('@groupName button group in position @position of @positionCount in row @row of @rowCount.',{'@groupName':o.attr('data-drupal-ckeditor-toolbar-group-name'),'@position':r,'@positionCount':l,'@row':n,'@rowCount':a});if(r===1&&n===a){e+='\n';e+=t.t('Press the down arrow key to create a new row.')};t.announce(e,'assertive')},announceButtonPosition:function(o){var c=o.closest('.ckeditor-row'),p=c.parent().children(),d=o.closest('.ckeditor-buttons').children(),n=o.closest('.ckeditor-toolbar-group'),h=n.parent().children(),l=h.index(n)+1,b=h.not('.placeholder').length,a=d.index(o)+1,r=d.length,u=p.index(c)+1,i=p.not('.placeholder').length,s=(o.attr('data-drupal-ckeditor-type')==='separator')?'':t.t('button'),e;if(o.closest('.ckeditor-toolbar-disabled').length>0){e=t.t('@name @type.',{'@name':o.children().attr('aria-label'),'@type':s});e+='\n'+t.t('Press the down arrow key to activate.');t.announce(e,'assertive')}
else if(n.not('.placeholder').length===1){e=t.t('@name @type in position @position of @positionCount in @groupName button group in row @row of @rowCount.',{'@name':o.children().attr('aria-label'),'@type':s,'@position':a,'@positionCount':r,'@groupName':n.attr('data-drupal-ckeditor-toolbar-group-name'),'@row':u,'@rowCount':i});if(l===1&&a===1&&u===i){e+='\n';e+=t.t('Press the down arrow key to create a new button group in a new row.')};if(l===b&&a===r){e+='\n';e+=t.t('This is the last group. Move the button forward to create a new group.')};t.announce(e,'assertive')}},announceButtonHelp:function(e){var a=o(e.currentTarget),r=a.parent(),i=r.closest('.ckeditor-toolbar-active').length>0,n;if(i){n=t.t('The "@name" button is currently enabled.',{'@name':a.attr('aria-label')});n+='\n'+t.t('Use the keyboard arrow keys to change the position of this button.');n+='\n'+t.t('Press the up arrow key on the top row to disable the button.')}
else{n=t.t('The "@name" button is currently disabled.',{'@name':a.attr('aria-label')});n+='\n'+t.t('Use the down arrow key to move this button into the active toolbar.')};t.announce(n);e.preventDefault()},announceSeparatorHelp:function(e){var a=o(e.currentTarget),r=a.parent(),i=r.closest('.ckeditor-toolbar-active').length>0,n;if(i){n=t.t('This @name is currently enabled.',{'@name':a.attr('aria-label')});n+='\n'+t.t('Use the keyboard arrow keys to change the position of this separator.')}
else{n=t.t('Separators are used to visually split individual buttons.');n+='\n'+t.t('This @name is currently disabled.',{'@name':a.attr('aria-label')});n+='\n'+t.t('Use the down arrow key to move this separator into the active toolbar.');n+='\n'+t.t('You may add multiple separators to each button group.')};t.announce(n);e.preventDefault()}})})(Drupal,Backbone,jQuery);;
(function(o,t,r,e){'use strict';t.ckeditor.KeyboardView=r.View.extend({initialize:function(){this.$el.on('keydown.ckeditor','.ckeditor-buttons a, .ckeditor-multiple-buttons a',this.onPressButton.bind(this));this.$el.on('keydown.ckeditor','[data-drupal-ckeditor-type="group"]',this.onPressGroup.bind(this))},render:function(){},onPressButton:function(i){var u=[38,63232,40,63233],k=[37,63234,39,63235];if(i.keyCode===13){i.stopPropagation()};if(e.indexOf(e.union(u,k),i.keyCode)>-1){var g=this,a=o(i.currentTarget),r=a.parent(),n=r.parent(),d=r.closest('.ckeditor-toolbar-group'),c=r.closest('.ckeditor-row'),p=n.data('drupal-ckeditor-button-sorting'),y=this.$el.find('[data-drupal-ckeditor-button-sorting="source"]'),f=this.$el.find('.ckeditor-toolbar-active'),b=d,l;if(p==='source'){if(e.indexOf([40,63233],i.keyCode)>-1){f.find('.ckeditor-toolbar-group-buttons').eq(0).prepend(r)}}
else if(p==='target'){if(e.indexOf(k,i.keyCode)>-1){var h=n.children(),s=h.index(r);if(e.indexOf([37,63234],i.keyCode)>-1){if(s>0){r.insertBefore(n.children().eq(s-1))}
else{d=n.parent().prev();if(d.length>0){d.find('.ckeditor-toolbar-group-buttons').append(r)}
else{n.closest('.ckeditor-row').prev().find('.ckeditor-toolbar-group').not('.placeholder').find('.ckeditor-toolbar-group-buttons').eq(-1).append(r)}}}
else if(e.indexOf([39,63235],i.keyCode)>-1){if(s<(h.length-1)){r.insertAfter(n.children().eq(s+1))}
else{n.parent().next().find('.ckeditor-toolbar-group-buttons').prepend(r)}}}
else if(e.indexOf(u,i.keyCode)>-1){l=(e.indexOf([38,63232],i.keyCode)>-1)?'prev':'next';c=n.closest('.ckeditor-row')[l]();if(l==='prev'&&c.length===0){if(r.data('drupal-ckeditor-type')==='separator'){r.off().remove();f.find('.ckeditor-toolbar-group-buttons').eq(0).children().eq(0).children().trigger('focus')}
else{y.prepend(r)}}
else{c.find('.ckeditor-toolbar-group-buttons').eq(0).prepend(r)}}}
else if(p==='dividers'){if(e.indexOf([40,63233],i.keyCode)>-1){r=r.clone(!0);f.find('.ckeditor-toolbar-group-buttons').eq(0).prepend(r);a=r.children()}};g=this;t.ckeditor.registerButtonMove(this,r,function(e){if(!e&&b){b.find('.ckeditor-buttons').append(r)}
else{g.$el.find('.ui-sortable').sortable('refresh')};a.trigger('focus')});i.preventDefault();i.stopPropagation()}},onPressGroup:function(r){var l=[38,63232,40,63233],f=[37,63234,39,63235];if(r.keyCode===13){var p=this;window.setTimeout(function(){t.ckeditor.openGroupNameDialog(p,o(r.currentTarget))},0);r.preventDefault();r.stopPropagation()};if(e.indexOf(e.union(l,f),r.keyCode)>-1){var i=o(r.currentTarget),d=i.parent(),s=d.children(),n,a;if(e.indexOf(f,r.keyCode)>-1){n=s.index(i);if((e.indexOf([37,63234],r.keyCode)>-1)){if(n>0){i.insertBefore(s.eq(n-1))}
else{i.insertBefore(d.closest('.ckeditor-row').prev().find('.ckeditor-toolbar-groups').children().eq(-1))}}
else if(e.indexOf([39,63235],r.keyCode)>-1){if(!s.eq(n+1).hasClass('placeholder')){i.insertAfter(d.children().eq(n+1))}
else{d.closest('.ckeditor-row').next().find('.ckeditor-toolbar-groups').prepend(i)}}}
else if(e.indexOf(l,r.keyCode)>-1){a=(e.indexOf([38,63232],r.keyCode)>-1)?'prev':'next';i.closest('.ckeditor-row')[a]().find('.ckeditor-toolbar-groups').eq(0).prepend(i)};t.ckeditor.registerGroupMove(this,i);i.trigger('focus');r.preventDefault();r.stopPropagation()}}})})(jQuery,Drupal,Backbone,_);;
(function(t,e,o,r,i){'use strict';e.ckeditor.ControllerView=o.View.extend({events:{},initialize:function(){this.getCKEditorFeatures(this.model.get('hiddenEditorConfig'),this.disableFeaturesDisallowedByFilters.bind(this));this.model.listenTo(this.model,'change:activeEditorConfig',this.model.sync);this.listenTo(this.model,'change:isDirty',this.parseEditorDOM)},parseEditorDOM:function(e,r,n){if(r){var s=this.model.get('activeEditorConfig'),d=[];this.$el.find('.ckeditor-active-toolbar-configuration').children('.ckeditor-row').each(function(){var e=[];t(this).find('.ckeditor-toolbar-group').each(function(){var i=t(this),o=i.find('.ckeditor-button');if(o.length){var r={name:i.attr('data-drupal-ckeditor-toolbar-group-name'),items:[]};i.find('.ckeditor-button, .ckeditor-multiple-button').each(function(){r.items.push(t(this).attr('data-drupal-ckeditor-button-name'))});e.push(r)}});if(e.length){d.push(e)}});this.model.set('activeEditorConfig',d);this.model.set('isDirty',!1);if(n.broadcast!==!1){var a=this.getButtonList(s),o=this.getButtonList(d);if(a.length!==o.length){this.$el.find('.ckeditor-toolbar-active').trigger('CKEditorToolbarChanged',[(a.length<o.length)?'added':'removed',i.difference(i.union(a,o),i.intersection(a,o))[0]])}}}},getCKEditorFeatures:function(o,a){var n=function(t){return(i.isObject(t))?i.keys(t):[]},f=function(t,o){for(var a=0;a<o.length;a++){var r=o[a],i=new e.EditorFeatureHTMLRule(),d=n(r.elements);i.required.tags=(r.propertiesOnly)?[]:d;i.allowed.tags=d;i.required.attributes=n(r.requiredAttributes);i.allowed.attributes=n(r.attributes);i.required.styles=n(r.requiredStyles);i.allowed.styles=n(r.styles);i.required.classes=n(r.requiredClasses);i.allowed.classes=n(r.classes);i.raw=r;t.addHTMLRule(i)}},d='ckeditor-hidden';if(r.instances[d]){r.instances[d].destroy(!0)};var u=this.model.get('hiddenEditorConfig');if(u.drupalExternalPlugins){var s=u.drupalExternalPlugins;for(var l in s){if(s.hasOwnProperty(l)){r.plugins.addExternal(l,s[l],'')}}};r.inline(t('#'+d).get(0),o);r.once('instanceReady',function(t){if(t.editor.name===d){var r={};var l=t.editor.filter.allowedContent,s,o;for(var n=0;n<l.length;n++){s=l[n];o=s.featureName||':(';if(!r[o]){r[o]=[]};r[o].push(s)};var u={};var g={};for(var i in r){if(r.hasOwnProperty(i)){var c=new e.EditorFeature(i);f(c,r[i]);u[i]=c;var h=t.editor.getCommand(i);if(h){g[h.uiItems[0].name]=i}}};a(u,g)}})},getFeatureForButton:function(t){if(t==='-'){return!1};var i=this.model.get('buttonsToFeatures')[t.toLowerCase()];if(!i){i=t.toLowerCase()};var r=this.model.get('featuresMetadata');if(!r[i]){r[i]=new e.EditorFeature(i);this.model.set('featuresMetadata',r)};return r[i]},disableFeaturesDisallowedByFilters:function(r,o){this.model.set('featuresMetadata',r);this.model.set('buttonsToFeatures',o);this.broadcastConfigurationChanges(this.$el);var a=[],u=i.flatten(this.model.get('activeEditorConfig'));for(var d=0;d<u.length;d++){var f=u[d].items;for(var s=0;s<f.length;s++){a.push(f[s])}};a=i.unique(a);for(var n=0;n<a.length;n++){var l=a[n],h=this.getFeatureForButton(l);if(h===!1){continue};if(e.editorConfiguration.featureIsAllowedByFilters(h)){this.$el.find('.ckeditor-toolbar-active').trigger('CKEditorToolbarChanged',['added',a[n]])}
else{t('.ckeditor-toolbar-active li[data-drupal-ckeditor-button-name="'+l+'"]').detach().appendTo('.ckeditor-toolbar-disabled > .ckeditor-toolbar-available > ul');this.model.set({isDirty:!0},{broadcast:!1})}}},broadcastConfigurationChanges:function(t){var o=this,r=this.model.get('hiddenEditorConfig'),n=this.getFeatureForButton.bind(this),a=this.getCKEditorFeatures.bind(this);t.find('.ckeditor-toolbar-active').on('CKEditorToolbarChanged.ckeditorAdmin',function(t,i,r){var o=n(r);if(o===!1){return};var a=(i==='added')?'addedFeature':'removedFeature';e.editorConfiguration[a](o)}).on('CKEditorPluginSettingsChanged.ckeditorAdmin',function(t,n){for(var d in n){if(n.hasOwnProperty(d)){r[d]=n[d]}};a(r,function(t){var a=o.model.get('featuresMetadata');for(var r in t){if(t.hasOwnProperty(r)){var n=t[r];if(a.hasOwnProperty(r)&&!i.isEqual(a[r],n)){e.editorConfiguration.modifiedFeature(n)}}};o.model.set('featuresMetadata',t)})})},getButtonList:function(t){var e=[];t=i.flatten(t);t.forEach(function(t){t.items.forEach(function(t){e.push(t)})});return i.without(e,'-')}})})(jQuery,Drupal,Backbone,CKEDITOR,_);;
(function(e,o,t){'use strict';e.ckeditor.VisualView=o.View.extend({events:{'click .ckeditor-toolbar-group-name':'onGroupNameClick','click .ckeditor-groupnames-toggle':'onGroupNamesToggleClick','click .ckeditor-add-new-group button':'onAddGroupButtonClick'},initialize:function(){this.listenTo(this.model,'change:isDirty change:groupNamesVisible',this.render);t(e.theme('ckeditorButtonGroupNamesToggle')).prependTo(this.$el.find('#ckeditor-active-toolbar').parent());this.render()},render:function(t,o,r){this.insertPlaceholders();this.applySorting();var i=this.model.get('groupNamesVisible');if(r&&r.changes&&r.changes.isDirty){this.model.set({groupNamesVisible:!0},{silent:!0});i=!0};this.$el.find('[data-toolbar="active"]').toggleClass('ckeditor-group-names-are-visible',i);this.$el.find('.ckeditor-groupnames-toggle').text((i)?e.t('Hide group names'):e.t('Show group names')).attr('aria-pressed',i);return this},onGroupNameClick:function(o){var i=t(o.currentTarget).closest('.ckeditor-toolbar-group');e.ckeditor.openGroupNameDialog(this,i);o.stopPropagation();o.preventDefault()},onGroupNamesToggleClick:function(e){this.model.set('groupNamesVisible',!this.model.get('groupNamesVisible'));e.preventDefault()},onAddGroupButtonClick:function(o){function i(e,i){if(e){i.appendTo(t(o.currentTarget).closest('.ckeditor-row').children('.ckeditor-toolbar-groups'));i.trigger('focus')}};e.ckeditor.openGroupNameDialog(this,t(e.theme('ckeditorToolbarGroup')),i);o.preventDefault()},endGroupDrag:function(t,o){var i=this;e.ckeditor.registerGroupMove(this,o.item,function(e){if(!e){i.$el.find('.ckeditor-toolbar-configuration').find('.ui-sortable').sortable('cancel')}})},startButtonDrag:function(e,t){this.$el.find('a:focus').trigger('blur');this.model.set('groupNamesVisible',!0)},endButtonDrag:function(t,o){var i=this;e.ckeditor.registerButtonMove(this,o.item,function(e){if(!e){i.$el.find('.ui-sortable').sortable('cancel')};o.item.find('a').trigger('focus')})},applySorting:function(){this.$el.find('.ckeditor-buttons').not('.ui-sortable').sortable({connectWith:'.ckeditor-buttons',placeholder:'ckeditor-button-placeholder',forcePlaceholderSize:!0,tolerance:'pointer',cursor:'move',start:this.startButtonDrag.bind(this),stop:this.endButtonDrag.bind(this)}).disableSelection();this.$el.find('.ckeditor-toolbar-groups').not('.ui-sortable').sortable({connectWith:'.ckeditor-toolbar-groups',cancel:'.ckeditor-add-new-group',placeholder:'ckeditor-toolbar-group-placeholder',forcePlaceholderSize:!0,cursor:'move',stop:this.endGroupDrag.bind(this)});this.$el.find('.ckeditor-multiple-buttons li').draggable({connectToSortable:'.ckeditor-toolbar-active .ckeditor-buttons',helper:'clone'})},insertPlaceholders:function(){this.insertPlaceholderRow();this.insertNewGroupButtons()},insertPlaceholderRow:function(){var o=this.$el.find('.ckeditor-row');if(!o.eq(-1).hasClass('placeholder')){this.$el.find('.ckeditor-toolbar-active').children('.ckeditor-active-toolbar-configuration').append(e.theme('ckeditorRow'))};o=this.$el.find('.ckeditor-row');var i=o.length;o.filter(function(e,o){if(e+1===i){return!1};return t(o).find('.ckeditor-toolbar-group').not('.placeholder').length===0}).remove()},insertNewGroupButtons:function(){this.$el.find('.ckeditor-row').each(function(){var o=t(this),r=o.find('.ckeditor-toolbar-group'),i=o.find('.ckeditor-add-new-group');if(i.length===0){o.children('.ckeditor-toolbar-groups').append(e.theme('ckeditorNewButtonGroup'))}
else if(!r.eq(-1).hasClass('ckeditor-add-new-group')){i.appendTo(o.children('.ckeditor-toolbar-groups'))}})}})})(Drupal,Backbone,jQuery);;
(function(t,e,n,i){'use strict';e.behaviors.ckeditorStylesComboSettings={attach:function(e){var s=t(e),l=s.find('.ckeditor-toolbar-configuration').find('.ckeditor-toolbar-active'),r=n.ckeditor.hiddenCKEditorConfig.stylesSet,o=this;s.find('[name="editor[settings][plugins][stylescombo][styles]"]').on('blur.ckeditorStylesComboSettings',function(){var n=t.trim(t(this).val()),e=o._generateStylesSetSetting(n);if(!i.isEqual(r,e)){r=e;l.trigger('CKEditorPluginSettingsChanged',[{stylesSet:e}])}})},_generateStylesSetSetting:function(e){var s=[];e=e.replace(/\r/g,'\n');var r=e.split('\n');for(var n=0;n<r.length;n++){var i=t.trim(r[n]);if(i.length===0){continue};if(i.match(/^ *[a-zA-Z0-9]+ *(\.[a-zA-Z0-9_-]+ *)*\| *.+ *$/)===null){continue};var l=i.split('|'),a=l[0],u=l[1],o=a.split('.'),c=o.shift();s.push({attributes:{class:o.join(' ')},element:c,name:u})};return s}};e.behaviors.ckeditorStylesComboSettingsSummary={attach:function(){t('[data-ckeditor-plugin-id="stylescombo"]').drupalSetSummary(function(i){var n=t.trim(t('[data-drupal-selector="edit-editor-settings-plugins-stylescombo-styles"]').val());if(n.length===0){return e.t('No styles configured')}
else{var r=t.trim(n).split('\n').length;return e.t('@count styles configured',{'@count':r})}})}}})(jQuery,Drupal,drupalSettings,_);;
(function(t,e){'use strict';e.behaviors.ckeditorLanguageSettingsSummary={attach:function(){t('#edit-editor-settings-plugins-language').drupalSetSummary(function(e){return t('#edit-editor-settings-plugins-language-language-list-type option:selected').text()})}}})(jQuery,Drupal);;
(function(a,e,i){'use strict';e.behaviors.ckeditorDrupalImageSettingsSummary={attach:function(){a('[data-ckeditor-plugin-id="drupalimage"]').drupalSetSummary(function(o){var i='input[name="editor[settings][plugins][drupalimage][image_upload]',m=a(i+'[status]"]'),t=a(i+'[max_size]"]'),r=a(i+'[max_dimensions][width]"]'),n=a(i+'[max_dimensions][height]"]'),d=a(i+'[scheme]"]:checked'),u=t.val()?t.val():t.attr('placeholder'),l=(r.val()&&n.val())?'('+r.val()+'x'+n.val()+')':'';if(!m.is(':checked')){return e.t('Uploads disabled')};var s='';s+=e.t('Uploads enabled, max size: @size @dimensions',{'@size':u,'@dimensions':l});if(d.length){s+='<br />'+d.attr('data-label')};return s})}}})(jQuery,Drupal,drupalSettings);;
(function(e,i){'use strict';var t=i.states={postponed:[]};i.behaviors.states={attach:function(i,r){var o=e(i).find('[data-drupal-states]'),n,a,l=o.length;for(var s=0;s<l;s++){n=JSON.parse(o[s].getAttribute('data-drupal-states'));for(a in n){if(n.hasOwnProperty(a)){new t.Dependent({element:e(o[s]),state:t.State.sanitize(a),constraints:n[a]})}}}
while(t.postponed.length){(t.postponed.shift())()}}};t.Dependent=function(t){e.extend(this,{values:{},oldValue:null},t);this.dependees=this.getDependees();for(var i in this.dependees){if(this.dependees.hasOwnProperty(i)){this.initializeDependee(i,this.dependees[i])}}};t.Dependent.comparisons={RegExp:function(e,t){return e.test(t)},Function:function(e,t){return e(t)},Number:function(e,t){return(typeof t==='string')?n(e.toString(),t):n(e,t)}};t.Dependent.prototype={initializeDependee:function(i,r){var n,o=this;function a(e){o.update(e.data.selector,e.data.state,e.value)};this.values[i]={};for(var s in r){if(r.hasOwnProperty(s)){n=r[s];if(e.inArray(n,r)===-1){continue};n=t.State.sanitize(n);this.values[i][n.name]=null;e(i).on('state:'+n,{selector:i,state:n},a);new t.Trigger({selector:i,state:n})}}},compare:function(e,i,r){var s=this.values[i][r.name];if(e.constructor.name in t.Dependent.comparisons){return t.Dependent.comparisons[e.constructor.name](e,s)}
else{return n(e,s)}},update:function(e,t,i){if(i!==this.values[e][t.name]){this.values[e][t.name]=i;this.reevaluate()}},reevaluate:function(){var e=this.verifyConstraints(this.constraints);if(e!==this.oldValue){this.oldValue=e;e=s(e,this.state.invert);this.element.trigger({type:'state:'+this.state,value:e,trigger:!0})}},verifyConstraints:function(t,i){var r;if(e.isArray(t)){var l=e.inArray('xor',t)===-1,u=t.length;for(var n=0;n<u;n++){if(t[n]!=='xor'){var o=this.checkConstraints(t[n],i,n);if(o&&(l||r)){return l};r=r||o}}}
else if(e.isPlainObject(t)){for(var s in t){if(t.hasOwnProperty(s)){r=a(r,this.checkConstraints(t[s],i,s));if(r===!1){return!1}}}};return r},checkConstraints:function(e,i,r){if(typeof r!=='string'||(/[0-9]/).test(r[0])){r=null}
else if(typeof i==='undefined'){i=r;r=null};if(r!==null){r=t.State.sanitize(r);return s(this.compare(e,i,r),r.invert)}
else{return this.verifyConstraints(e,i)}},getDependees:function(){var e={};var t=this.compare;this.compare=function(t,i,r){(e[i]||(e[i]=[])).push(r.name)};this.verifyConstraints(this.constraints);this.compare=t;return e}};t.Trigger=function(i){e.extend(this,i);if(this.state in t.Trigger.states){this.element=e(this.selector);if(!this.element.data('trigger:'+this.state)){this.initialize()}}};t.Trigger.prototype={initialize:function(){var e=t.Trigger.states[this.state];if(typeof e==='function'){e.call(window,this.element)}
else{for(var i in e){if(e.hasOwnProperty(i)){this.defaultTrigger(i,e[i])}}};this.element.data('trigger:'+this.state,!0)},defaultTrigger:function(i,r){var n=r.call(this.element);this.element.on(i,e.proxy(function(e){var t=r.call(this.element,e);if(n!==t){this.element.trigger({type:'state:'+this.state,value:t,oldValue:n});n=t}},this));t.postponed.push(e.proxy(function(){this.element.trigger({type:'state:'+this.state,value:n,oldValue:null})},this))}};t.Trigger.states={empty:{keyup:function(){return this.val()===''}},checked:{change:function(){var t=!1;this.each(function(){t=e(this).prop('checked');return!t});return t}},value:{keyup:function(){if(this.length>1){return this.filter(':checked').val()||!1};return this.val()},change:function(){if(this.length>1){return this.filter(':checked').val()||!1};return this.val()}},collapsed:{collapsed:function(e){return(typeof e!=='undefined'&&'value' in e)?e.value:!this.is('[open]')}}};t.State=function(e){this.pristine=this.name=e;var i=!0;do{while(this.name.charAt(0)==='!'){this.name=this.name.substring(1);this.invert=!this.invert};if(this.name in t.State.aliases){this.name=t.State.aliases[this.name]}
else{i=!1}}
while(i);};t.State.sanitize=function(e){if(e instanceof t.State){return e}
else{return new t.State(e)}};t.State.aliases={enabled:'!disabled',invisible:'!visible',invalid:'!valid',untouched:'!touched',optional:'!required',filled:'!empty',unchecked:'!checked',irrelevant:'!relevant',expanded:'!collapsed',open:'!collapsed',closed:'collapsed',readwrite:'!readonly'};t.State.prototype={invert:!1,toString:function(){return this.name}};var r=e(document);r.on('state:disabled',function(t){if(t.trigger){e(t.target).prop('disabled',t.value).closest('.js-form-item, .js-form-submit, .js-form-wrapper').toggleClass('form-disabled',t.value).find('select, input, textarea').prop('disabled',t.value)}});r.on('state:required',function(t){if(t.trigger){if(t.value){var r='label'+(t.target.id?'[for='+t.target.id+']':''),i=e(t.target).attr({'required':'required','aria-required':'aria-required'}).closest('.js-form-item, .js-form-wrapper').find(r);if(!i.hasClass('js-form-required').length){i.addClass('js-form-required form-required')}}
else{e(t.target).removeAttr('required aria-required').closest('.js-form-item, .js-form-wrapper').find('label.js-form-required').removeClass('js-form-required form-required')}}});r.on('state:visible',function(t){if(t.trigger){e(t.target).closest('.js-form-item, .js-form-submit, .js-form-wrapper').toggle(t.value)}});r.on('state:checked',function(t){if(t.trigger){e(t.target).prop('checked',t.value)}});r.on('state:collapsed',function(t){if(t.trigger){if(e(t.target).is('[open]')===t.value){e(t.target).find('> summary').trigger('click')}}});function a(e,t){if(typeof e==='undefined'){return t}
else if(typeof t==='undefined'){return e}
else{return e&&t}};function s(e,t){return(t&&typeof e!=='undefined')?!e:e};function n(e,t){if(e===t){return typeof e==='undefined'?e:!0}
else{return typeof e==='undefined'||typeof t==='undefined'}}})(jQuery,Drupal);;
/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(e){"use strict";function t(t){var r=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(r))}function r(t){var r=t.target,a=e(r);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length)return;r=n[0]}var i=this;if(i.clk=r,"image"==r.type)if(void 0!==t.offsetX)i.clk_x=t.offsetX,i.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=a.offset();i.clk_x=t.pageX-o.left,i.clk_y=t.pageY-o.top}else i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var n={};n.fileapi=void 0!==e("<input type='file'/>").get(0).files,n.formdata=void 0!==window.FormData;var i=!!e.fn.prop;e.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function r(r){var a,n,i=e.param(r,t.traditional).split("&"),o=i.length,s=[];for(a=0;o>a;a++)i[a]=i[a].replace(/\+/g," "),n=i[a].split("="),s.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return s}function o(a){for(var n=new FormData,i=0;i<a.length;i++)n.append(a[i].name,a[i].value);if(t.extraData){var o=r(t.extraData);for(i=0;i<o.length;i++)o[i]&&n.append(o[i][0],o[i][1])}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:u||"POST"});t.uploadProgress&&(s.xhr=function(){var r=e.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener("progress",function(e){var r=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(r=Math.ceil(a/n*100)),t.uploadProgress(e,a,n,r)},!1),r}),s.data=null;var c=s.beforeSend;return s.beforeSend=function(e,r){r.data=t.formData?t.formData:n,c&&c.call(this,e,r)},e.ajax(s)}function s(r){function n(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(r){a("cannot get iframe.contentWindow document: "+r)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(r){a("cannot get iframe.contentDocument: "+r),t=e.document}return t}function o(){function t(){try{var e=n(g).readyState;a("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(r){a("Server abort: ",r," (",r.name,")"),s(k),j&&clearTimeout(j),j=void 0}}var r=f.attr2("target"),i=f.attr2("action"),o="multipart/form-data",c=f.attr("enctype")||f.attr("encoding")||o;w.setAttribute("target",p),(!u||/post/i.test(u))&&w.setAttribute("method","POST"),i!=m.url&&w.setAttribute("action",m.url),m.skipEncodingOverride||u&&!/post/i.test(u)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(j=setTimeout(function(){T=!0,s(D)},m.timeout));var l=[];try{if(m.extraData)for(var d in m.extraData)m.extraData.hasOwnProperty(d)&&l.push(e.isPlainObject(m.extraData[d])&&m.extraData[d].hasOwnProperty("name")&&m.extraData[d].hasOwnProperty("value")?e('<input type="hidden" name="'+m.extraData[d].name+'">').val(m.extraData[d].value).appendTo(w)[0]:e('<input type="hidden" name="'+d+'">').val(m.extraData[d]).appendTo(w)[0]);m.iframeTarget||v.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1),setTimeout(t,15);try{w.submit()}catch(h){var x=document.createElement("form").submit;x.apply(w)}}finally{w.setAttribute("action",i),w.setAttribute("enctype",c),r?w.setAttribute("target",r):f.removeAttr("target"),e(l).remove()}}function s(t){if(!x.aborted&&!F){if(M=n(g),M||(a("cannot access response document"),t=k),t===D&&x)return x.abort("timeout"),void S.reject(x,"timeout");if(t==k&&x)return x.abort("server abort"),void S.reject(x,"error","server abort");if(M&&M.location.href!=m.iframeSrc||T){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var r,i="success";try{if(T)throw"timeout";var o="xml"==m.dataType||M.XMLDocument||e.isXMLDoc(M);if(a("isXml="+o),!o&&window.opera&&(null===M.body||!M.body.innerHTML)&&--O)return a("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var u=M.body?M.body:M.documentElement;x.responseText=u?u.innerHTML:null,x.responseXML=M.XMLDocument?M.XMLDocument:M,o&&(m.dataType="xml"),x.getResponseHeader=function(e){var t={"content-type":m.dataType};return t[e.toLowerCase()]},u&&(x.status=Number(u.getAttribute("status"))||x.status,x.statusText=u.getAttribute("statusText")||x.statusText);var c=(m.dataType||"").toLowerCase(),l=/(json|script|text)/.test(c);if(l||m.textarea){var f=M.getElementsByTagName("textarea")[0];if(f)x.responseText=f.value,x.status=Number(f.getAttribute("status"))||x.status,x.statusText=f.getAttribute("statusText")||x.statusText;else if(l){var p=M.getElementsByTagName("pre")[0],h=M.getElementsByTagName("body")[0];p?x.responseText=p.textContent?p.textContent:p.innerText:h&&(x.responseText=h.textContent?h.textContent:h.innerText)}}else"xml"==c&&!x.responseXML&&x.responseText&&(x.responseXML=X(x.responseText));try{E=_(x,c,m)}catch(y){i="parsererror",x.error=r=y||i}}catch(y){a("error caught: ",y),i="error",x.error=r=y||i}x.aborted&&(a("upload aborted"),i=null),x.status&&(i=x.status>=200&&x.status<300||304===x.status?"success":"error"),"success"===i?(m.success&&m.success.call(m.context,E,"success",x),S.resolve(x.responseText,"success",x),d&&e.event.trigger("ajaxSuccess",[x,m])):i&&(void 0===r&&(r=x.statusText),m.error&&m.error.call(m.context,x,i,r),S.reject(x,"error",r),d&&e.event.trigger("ajaxError",[x,m,r])),d&&e.event.trigger("ajaxComplete",[x,m]),d&&!--e.active&&e.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,x,i),F=!0,m.timeout&&clearTimeout(j),setTimeout(function(){m.iframeTarget?v.attr("src",m.iframeSrc):v.remove(),x.responseXML=null},100)}}}var c,l,m,d,p,v,g,x,y,b,T,j,w=f[0],S=e.Deferred();if(S.abort=function(e){x.abort(e)},r)for(l=0;l<h.length;l++)c=e(h[l]),i?c.prop("disabled",!1):c.removeAttr("disabled");if(m=e.extend(!0,{},e.ajaxSettings,t),m.context=m.context||m,p="jqFormIO"+(new Date).getTime(),m.iframeTarget?(v=e(m.iframeTarget),b=v.attr2("name"),b?p=b:v.attr2("name",p)):(v=e('<iframe name="'+p+'" src="'+m.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var r="timeout"===t?"timeout":"aborted";a("aborting upload... "+r),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(n){}v.attr("src",m.iframeSrc),x.error=r,m.error&&m.error.call(m.context,x,r,t),d&&e.event.trigger("ajaxError",[x,m,r]),m.complete&&m.complete.call(m.context,x,r)}},d=m.global,d&&0===e.active++&&e.event.trigger("ajaxStart"),d&&e.event.trigger("ajaxSend",[x,m]),m.beforeSend&&m.beforeSend.call(m.context,x,m)===!1)return m.global&&e.active--,S.reject(),S;if(x.aborted)return S.reject(),S;y=w.clk,y&&(b=y.name,b&&!y.disabled&&(m.extraData=m.extraData||{},m.extraData[b]=y.value,"image"==y.type&&(m.extraData[b+".x"]=w.clk_x,m.extraData[b+".y"]=w.clk_y)));var D=1,k=2,A=e("meta[name=csrf-token]").attr("content"),L=e("meta[name=csrf-param]").attr("content");L&&A&&(m.extraData=m.extraData||{},m.extraData[L]=A),m.forceSync?o():setTimeout(o,10);var E,M,F,O=50,X=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},C=e.parseJSON||function(e){return window.eval("("+e+")")},_=function(t,r,a){var n=t.getResponseHeader("content-type")||"",i="xml"===r||!r&&n.indexOf("xml")>=0,o=i?t.responseXML:t.responseText;return i&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,r)),"string"==typeof o&&("json"===r||!r&&n.indexOf("json")>=0?o=C(o):("script"===r||!r&&n.indexOf("javascript")>=0)&&e.globalEval(o)),o};return S}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var u,c,l,f=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),u=t.type||this.attr2("method"),c=t.url||this.attr2("action"),l="string"==typeof c?e.trim(c):"",l=l||window.location.href||"",l&&(l=(l.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:l,success:e.ajaxSettings.success,type:u||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var m={};if(this.trigger("form-pre-serialize",[this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=t.traditional;void 0===d&&(d=e.ajaxSettings.traditional);var p,h=[],v=this.formToArray(t.semantic,h);if(t.data&&(t.extraData=t.data,p=e.param(t.data,d)),t.beforeSubmit&&t.beforeSubmit(v,this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=e.param(v,d);p&&(g=g?g+"&"+p:p),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+g,t.data=null):t.data=g;var x=[];if(t.resetForm&&x.push(function(){f.resetForm()}),t.clearForm&&x.push(function(){f.clearForm(t.includeHidden)}),!t.dataType&&t.target){var y=t.success||function(){};x.push(function(r){var a=t.replaceTarget?"replaceWith":"html";e(t.target)[a](r).each(y,arguments)})}else t.success&&x.push(t.success);if(t.success=function(e,r,a){for(var n=t.context||this,i=0,o=x.length;o>i;i++)x[i].apply(n,[e,r,a||f,f])},t.error){var b=t.error;t.error=function(e,r,a){var n=t.context||this;b.apply(n,[e,r,a,f])}}if(t.complete){var T=t.complete;t.complete=function(e,r){var a=t.context||this;T.apply(a,[e,r,f])}}var j=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),w=j.length>0,S="multipart/form-data",D=f.attr("enctype")==S||f.attr("encoding")==S,k=n.fileapi&&n.formdata;a("fileAPI :"+k);var A,L=(w||D)&&!k;t.iframe!==!1&&(t.iframe||L)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){A=s(v)}):A=s(v):A=(w||D)&&k?o(v):e.ajax(t),f.removeData("jqxhr").data("jqxhr",A);for(var E=0;E<h.length;E++)h[E]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(n){if(n=n||{},n.delegation=n.delegation&&e.isFunction(e.fn.on),!n.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(a("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(n)}),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return n.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,n,t).on("click.form-plugin",this.selector,n,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",n,t).bind("click.form-plugin",n,r)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,r){var a=[];if(0===this.length)return a;var i,o=this[0],s=this.attr("id"),u=t?o.getElementsByTagName("*"):o.elements;if(u&&!/MSIE [678]/.test(navigator.userAgent)&&(u=e(u).get()),s&&(i=e(':input[form="'+s+'"]').get(),i.length&&(u=(u||[]).concat(i))),!u||!u.length)return a;var c,l,f,m,d,p,h;for(c=0,p=u.length;p>c;c++)if(d=u[c],f=d.name,f&&!d.disabled)if(t&&o.clk&&"image"==d.type)o.clk==d&&(a.push({name:f,value:e(d).val(),type:d.type}),a.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}));else if(m=e.fieldValue(d,!0),m&&m.constructor==Array)for(r&&r.push(d),l=0,h=m.length;h>l;l++)a.push({name:f,value:m[l]});else if(n.fileapi&&"file"==d.type){r&&r.push(d);var v=d.files;if(v.length)for(l=0;l<v.length;l++)a.push({name:f,value:v[l],type:d.type});else a.push({name:f,value:"",type:d.type})}else null!==m&&"undefined"!=typeof m&&(r&&r.push(d),a.push({name:f,value:m,type:d.type,required:d.required}));if(!t&&o.clk){var g=e(o.clk),x=g[0];f=x.name,f&&!x.disabled&&"image"==x.type&&(a.push({name:f,value:g.val()}),a.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var r=[];return this.each(function(){var a=this.name;if(a){var n=e.fieldValue(this,t);if(n&&n.constructor==Array)for(var i=0,o=n.length;o>i;i++)r.push({name:a,value:n[i]});else null!==n&&"undefined"!=typeof n&&r.push({name:this.name,value:n})}}),e.param(r)},e.fn.fieldValue=function(t){for(var r=[],a=0,n=this.length;n>a;a++){var i=this[a],o=e.fieldValue(i,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(r,o):r.push(o))}return r},e.fieldValue=function(t,r){var a=t.name,n=t.type,i=t.tagName.toLowerCase();if(void 0===r&&(r=!0),r&&(!a||t.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!t.checked||("submit"==n||"image"==n)&&t.form&&t.form.clk!=t||"select"==i&&-1==t.selectedIndex))return null;if("select"==i){var o=t.selectedIndex;if(0>o)return null;for(var s=[],u=t.options,c="select-one"==n,l=c?o+1:u.length,f=c?o:0;l>f;f++){var m=u[f];if(m.selected){var d=m.value;if(d||(d=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),c)return d;s.push(d)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var r=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();r.test(a)||"textarea"==n?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(a)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type;if("checkbox"==r||"radio"==r)this.checked=t;else if("option"==this.tagName.toLowerCase()){var a=e(this).parent("select");t&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1});
;
(function(s,e){'use strict';e.theme.progressBar=function(s){return'<div id="'+s+'" class="progress" aria-live="polite"><div class="progress__label">&nbsp;</div><div class="progress__track"><div class="progress__bar"></div></div><div class="progress__percentage"></div><div class="progress__description">&nbsp;</div></div>'};e.ProgressBar=function(r,i,t,a){this.id=r;this.method=t||'GET';this.updateCallback=i;this.errorCallback=a;this.element=s(e.theme('progressBar',r))};s.extend(e.ProgressBar.prototype,{setProgress:function(e,r,i){if(e>=0&&e<=100){s(this.element).find('div.progress__bar').css('width',e+'%');s(this.element).find('div.progress__percentage').html(e+'%')};s('div.progress__description',this.element).html(r);s('div.progress__label',this.element).html(i);if(this.updateCallback){this.updateCallback(e,r,this)}},startMonitoring:function(s,e){this.delay=e;this.uri=s;this.sendPing()},stopMonitoring:function(){clearTimeout(this.timer);this.uri=null},sendPing:function(){if(this.timer){clearTimeout(this.timer)};if(this.uri){var r=this,i=this.uri;if(i.indexOf('?')===-1){i+='?'}
else{i+='&'};i+='_format=json';s.ajax({type:this.method,url:i,data:'',dataType:'json',success:function(s){if(s.status===0){r.displayError(s.data);return};r.setProgress(s.percentage,s.message,s.label);r.timer=setTimeout(function(){r.sendPing()},r.delay)},error:function(s){var i=new e.AjaxError(s,r.uri);r.displayError('<pre>'+i.message+'</pre>')}})}},displayError:function(e){var r=s('<div class="messages messages--error"></div>').html(e);s(this.element).before(r).hide();if(this.errorCallback){this.errorCallback(this)}}})})(jQuery,Drupal);;
(function(e,s,t,r){'use strict';t.behaviors.AJAX={attach:function(s,r){function i(s){var a=r.ajax[s];if(typeof a.selector==='undefined'){a.selector='#'+s};e(a.selector).once('drupal-ajax').each(function(){a.element=this;a.base=s;t.ajax(a)})};for(var a in r.ajax){if(r.ajax.hasOwnProperty(a)){i(a)}};e('.use-ajax').once('ajax').each(function(){var s={};s.progress={type:'throbber'};var r=e(this).attr('href');if(r){s.url=r;s.event='click'};s.dialogType=e(this).data('dialog-type');s.dialog=e(this).data('dialog-options');s.base=e(this).attr('id');s.element=this;t.ajax(s)});e('.use-ajax-submit').once('ajax').each(function(){var s={};s.url=e(this.form).attr('action');s.setClick=!0;s.event='click';s.progress={type:'throbber'};s.base=e(this).attr('id');s.element=this;t.ajax(s)})},detach:function(e,s,r){if(r==='unload'){t.ajax.expired().forEach(function(e){t.ajax.instances[e.instanceIndex]=null})}}};t.AjaxError=function(s,r,a){var o,l,c,i,p;if(s.status){o='\n'+t.t('An AJAX HTTP error occurred.')+'\n'+t.t('HTTP Result Code: !status',{'!status':s.status})}
else{o='\n'+t.t('An AJAX HTTP request terminated abnormally.')};o+='\n'+t.t('Debugging information follows.');c='\n'+t.t('Path: !uri',{'!uri':r});l='';try{l='\n'+t.t('StatusText: !statusText',{'!statusText':e.trim(s.statusText)})}catch(n){};i='';try{i='\n'+t.t('ResponseText: !responseText',{'!responseText':e.trim(s.responseText)})}catch(n){};i=i.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,'');i=i.replace(/[\n]+\s+/g,'\n');p=s.status===0?('\n'+t.t('ReadyState: !readyState',{'!readyState':s.readyState})):'';a=a?('\n'+t.t('CustomMessage: !customMessage',{'!customMessage':a})):'';this.message=o+c+l+a+i+p;this.name='AjaxError'};t.AjaxError.prototype=new Error();t.AjaxError.prototype.constructor=t.AjaxError;t.ajax=function(e){if(arguments.length!==1){throw new Error('Drupal.ajax() function must be called with one configuration object only')};var a=e.base||!1,r=e.element||!1;delete e.base;delete e.element;if(!e.progress&&!r){e.progress=!1};var s=new t.Ajax(a,r,e);s.instanceIndex=t.ajax.instances.length;t.ajax.instances.push(s);return s};t.ajax.instances=[];t.ajax.expired=function(){return t.ajax.instances.filter(function(e){return e&&e.element!==!1&&!document.body.contains(e.element)})};t.Ajax=function(s,a,o){var l={event:a?'mousedown':null,keypress:!0,selector:s?'#'+s:null,effect:'none',speed:'none',method:'replaceWith',progress:{type:'throbber',message:t.t('Please wait...')},submit:{js:!0}};e.extend(this,l,o);this.commands=new t.AjaxCommands();this.instanceIndex=!1;if(this.wrapper){this.wrapper='#'+this.wrapper};this.element=a;this.element_settings=o;if(this.element&&this.element.form){this.$form=e(this.element.form)};if(!this.url){var n=e(this.element);if(n.is('a')){this.url=n.attr('href')}
else if(this.element&&a.form){this.url=this.$form.attr('action')}};var c=this.url;this.url=this.url.replace(/\/nojs(\/|$|\?|#)/g,'/ajax$1');if(r.ajaxTrustedUrl[c]){r.ajaxTrustedUrl[this.url]=!0};var i=this;i.options={url:i.url,data:i.submit,beforeSerialize:function(e,t){return i.beforeSerialize(e,t)},beforeSubmit:function(e,t,s){i.ajaxing=!0;return i.beforeSubmit(e,t,s)},beforeSend:function(e,t){i.ajaxing=!0;return i.beforeSend(e,t)},success:function(s,a,o){if(typeof s==='string'){s=e.parseJSON(s)};if(s!==null&&!r.ajaxTrustedUrl[i.url]){if(o.getResponseHeader('X-Drupal-Ajax-Token')!=='1'){var n=t.t('The response failed verification so will not be processed.');return i.error(o,i.url,n)}};return i.success(s,a)},complete:function(e,t){i.ajaxing=!1;if(t==='error'||t==='parsererror'){return i.error(e,i.url)}},dataType:'json',type:'POST'};if(o.dialog){i.options.data.dialogOptions=o.dialog};if(i.options.url.indexOf('?')===-1){i.options.url+='?'}
else{i.options.url+='&'};i.options.url+=t.ajax.WRAPPER_FORMAT+'=drupal_'+(o.dialogType||'ajax');e(i.element).on(o.event,function(e){if(!r.ajaxTrustedUrl[i.url]&&!t.url.isLocal(i.url)){throw new Error(t.t('The callback URL is not local and not trusted: !url',{'!url':i.url}))};return i.eventResponse(this,e)});if(o.keypress){e(i.element).on('keypress',function(e){return i.keypressResponse(this,e)})};if(o.prevent){e(i.element).on(o.prevent,!1)}};t.ajax.WRAPPER_FORMAT='_wrapper_format';t.Ajax.AJAX_REQUEST_PARAMETER='_drupal_ajax';t.Ajax.prototype.execute=function(){if(this.ajaxing){return};try{this.beforeSerialize(this.element,this.options);return e.ajax(this.options)}catch(t){this.ajaxing=!1;s.alert('An error occurred while attempting to process '+this.options.url+': '+t.message);return e.Deferred().reject()}};t.Ajax.prototype.keypressResponse=function(t,s){var r=this;if(s.which===13||(s.which===32&&t.type!=='text'&&t.type!=='textarea'&&t.type!=='tel'&&t.type!=='number')){s.preventDefault();s.stopPropagation();e(r.element_settings.element).trigger(r.element_settings.event)}};t.Ajax.prototype.eventResponse=function(t,r){r.preventDefault();r.stopPropagation();var a=this;if(a.ajaxing){return};try{if(a.$form){if(a.setClick){t.form.clk=t};a.$form.ajaxSubmit(a.options)}
else{a.beforeSerialize(a.element,a.options);e.ajax(a.options)}}catch(i){a.ajaxing=!1;s.alert('An error occurred while attempting to process '+a.options.url+': '+i.message)}};t.Ajax.prototype.beforeSerialize=function(e,s){if(this.$form){var i=this.settings||r;t.detachBehaviors(this.$form.get(0),i,'serialize')};s.data[t.Ajax.AJAX_REQUEST_PARAMETER]=1;var a=r.ajaxPageState;s.data['ajax_page_state[theme]']=a.theme;s.data['ajax_page_state[theme_token]']=a.theme_token;s.data['ajax_page_state[libraries]']=a.libraries};t.Ajax.prototype.beforeSubmit=function(e,t,s){};t.Ajax.prototype.beforeSend=function(t,s){if(this.$form){s.extraData=s.extraData||{};s.extraData.ajax_iframe_upload='1';var a=e.fieldValue(this.element);if(a!==null){s.extraData[this.element.name]=a}};e(this.element).prop('disabled',!0);if(!this.progress||!this.progress.type){return};var r='setProgressIndicator'+this.progress.type.slice(0,1).toUpperCase()+this.progress.type.slice(1).toLowerCase();if(r in this&&typeof this[r]==='function'){this[r].call(this)}};t.Ajax.prototype.setProgressIndicatorBar=function(){var s=new t.ProgressBar('ajax-progress-'+this.element.id,e.noop,this.progress.method,e.noop);if(this.progress.message){s.setProgress(-1,this.progress.message)};if(this.progress.url){s.startMonitoring(this.progress.url,this.progress.interval||1500)};this.progress.element=e(s.element).addClass('ajax-progress ajax-progress-bar');this.progress.object=s;e(this.element).after(this.progress.element)};t.Ajax.prototype.setProgressIndicatorThrobber=function(){this.progress.element=e('<div class="ajax-progress ajax-progress-throbber"><div class="throbber">&nbsp;</div></div>');if(this.progress.message){this.progress.element.find('.throbber').after('<div class="message">'+this.progress.message+'</div>')};e(this.element).after(this.progress.element)};t.Ajax.prototype.setProgressIndicatorFullscreen=function(){this.progress.element=e('<div class="ajax-progress ajax-progress-fullscreen">&nbsp;</div>');e('body').after(this.progress.element)};t.Ajax.prototype.success=function(s,a){if(this.progress.element){e(this.progress.element).remove()};if(this.progress.object){this.progress.object.stopMonitoring()};e(this.element).prop('disabled',!1);var c=e(this.element).parents('[data-drupal-selector]').addBack().toArray(),l=!1;for(var i in s){if(s.hasOwnProperty(i)&&s[i].command&&this.commands[s[i].command]){this.commands[s[i].command](this,s[i],a);if(s[i].command==='invoke'&&s[i].method==='focus'){l=!0}}};if(!l&&this.element&&!e(this.element).data('disable-refocus')){var o=!1;for(var n=c.length-1;!o&&n>0;n--){o=document.querySelector('[data-drupal-selector="'+c[n].getAttribute('data-drupal-selector')+'"]')};if(o){e(o).trigger('focus')}};if(this.$form){var p=this.settings||r;t.attachBehaviors(this.$form.get(0),p)};this.settings=null};t.Ajax.prototype.getEffect=function(e){var s=e.effect||this.effect,r=e.speed||this.speed,t={};if(s==='none'){t.showEffect='show';t.hideEffect='hide';t.showSpeed=''}
else if(s==='fade'){t.showEffect='fadeIn';t.hideEffect='fadeOut';t.showSpeed=r}
else{t.showEffect=s+'Toggle';t.hideEffect=s+'Toggle';t.showSpeed=r};return t};t.Ajax.prototype.error=function(s,a,i){if(this.progress.element){e(this.progress.element).remove()};if(this.progress.object){this.progress.object.stopMonitoring()};e(this.wrapper).show();e(this.element).prop('disabled',!1);if(this.$form){var o=this.settings||r;t.attachBehaviors(this.$form.get(0),o)};throw new t.AjaxError(s,a,i)};t.AjaxCommands=function(){};t.AjaxCommands.prototype={insert:function(s,a,i){var h=a.selector?e(a.selector):e(s.wrapper),p=a.method||s.method,n=s.getEffect(a),l,c=e('<div></div>').html(a.data),o=c.contents();if(o.length!==1||o.get(0).nodeType!==1){o=c};switch(p){case'html':case'replaceWith':case'replaceAll':case'empty':case'remove':l=a.settings||s.settings||r;t.detachBehaviors(h.get(0),l)};h[p](o);if(n.showEffect!=='show'){o.hide()};if(o.find('.ajax-new-content').length>0){o.find('.ajax-new-content').hide();o.show();o.find('.ajax-new-content')[n.showEffect](n.showSpeed)}
else if(n.showEffect!=='show'){o[n.showEffect](n.showSpeed)};if(o.parents('html').length>0){l=a.settings||s.settings||r;t.attachBehaviors(o.get(0),l)}},remove:function(s,a,i){var o=a.settings||s.settings||r;e(a.selector).each(function(){t.detachBehaviors(this,o)}).remove()},changed:function(s,r,a){var i=e(r.selector);if(!i.hasClass('ajax-changed')){i.addClass('ajax-changed');if(r.asterisk){i.find(r.asterisk).append(' <abbr class="ajax-changed" title="'+t.t('Changed')+'">*</abbr> ')}}},alert:function(e,t,r){s.alert(t.text,t.title)},redirect:function(e,t,r){s.location=t.url},css:function(t,s,r){e(s.selector).css(s.argument)},settings:function(s,a,i){var o=r.ajax;if(o){t.ajax.expired().forEach(function(e){if(e.selector){var t=e.selector.replace('#','');if(t in o){delete o[t]}}})};if(a.merge){e.extend(!0,r,a.settings)}
else{s.settings=a.settings}},data:function(t,s,r){e(s.selector).data(s.name,s.value)},invoke:function(t,s,r){var a=e(s.selector);a[s.method].apply(a,s.args)},restripe:function(t,s,r){e(s.selector).find('> tbody > tr:visible, > tr:visible').removeClass('odd even').filter(':even').addClass('odd').end().filter(':odd').addClass('even')},update_build_id:function(t,s,r){e('input[name="form_build_id"][value="'+s.old+'"]').val(s.new)},add_css:function(t,s,r){e('head').prepend(s.data);var i,a=/^@import url\("(.*)"\);$/igm;if(document.styleSheets[0].addImport&&a.test(s.data)){a.lastIndex=0;do{i=a.exec(s.data);document.styleSheets[0].addImport(i[1])}
while(i);}}}})(jQuery,window,Drupal,drupalSettings);;
(function(e,a,t){'use strict';a.behaviors.machineName={attach:function(t,i){var l=this,s=e(t),r=null,n=null;function c(e){var a=e.data;a.$wrapper.removeClass('visually-hidden');a.$target.trigger('focus');a.$suffix.hide();a.$source.off('.machineName')};function o(a){var i=a.data,t=i.options,s=e(a.target).val(),o=new RegExp(t.replace_pattern,'g'),c=s.toLowerCase().replace(o,t.replace).substr(0,t.maxlength);if(n&&n.readystate!==4){n.abort();n=null};if(r){clearTimeout(r);r=null};r=setTimeout(function(){if(s.toLowerCase()!==c){n=l.transliterate(s,t).done(function(e){l.showMachineName(e.substr(0,t.maxlength),i)})}
else{l.showMachineName(c,i)}},300)};Object.keys(i.machineName).forEach(function(n){var m='',u,r=i.machineName[n],p=s.find(n).addClass('machine-name-source').once('machine-name'),t=s.find(r.target).addClass('machine-name-target'),f=s.find(r.suffix),d=t.closest('.js-form-item');if(!p.length||!t.length||!f.length||!d.length){return};if(t.hasClass('error')){return};r.maxlength=t.attr('maxlength');d.addClass('visually-hidden');if(t.is(':disabled')||t.val()!==''){m=t.val()}
else if(p.val()!==''){m=l.transliterate(p.val(),r)};var h=e('<span class="machine-name-value">'+r.field_prefix+a.checkPlain(m)+r.field_suffix+'</span>');f.empty();if(r.label){f.append('<span class="machine-name-label">'+r.label+': </span>')};f.append(h);if(t.is(':disabled')){return};u={$source:p,$target:t,$suffix:f,$wrapper:d,$preview:h,options:r};var g=e('<span class="admin-link"><button type="button" class="link">'+a.t('Edit')+'</button></span>').on('click',u,c);f.append(g);if(t.val()===''){p.on('formUpdated.machineName',u,o).trigger('formUpdated.machineName')};t.on('invalid',u,c)})},showMachineName:function(e,t){var n=t.options;if(e!==''){if(e!==n.replace){t.$target.val(e);t.$preview.html(n.field_prefix+a.checkPlain(e)+n.field_suffix)};t.$suffix.show()}
else{t.$suffix.hide();t.$target.val(e);t.$preview.empty()}},transliterate:function(n,i){return e.get(a.url('machine_name/transliterate'),{text:n,langcode:t.langcode,replace_pattern:i.replace_pattern,replace_token:i.replace_token,replace:i.replace,lowercase:!0})}}})(jQuery,Drupal,drupalSettings);;
(function(a,t){'use strict';function s(i,n){var s=a(n),e=s.find('[data-drupal-nav-tabs-target]'),r=s.hasClass('is-collapsible');function l(a){e.toggleClass('is-open')};function o(a){s.addClass('is-horizontal');var i=s.find('.tabs'),t=i.outerHeight()<=i.find('.tabs__tab').outerHeight();s.toggleClass('is-horizontal',t);if(r){s.toggleClass('is-collapse-enabled',!t)};if(t){e.removeClass('is-open')}};s.addClass('position-container is-horizontal-enabled');s.on('click.tabs','[data-drupal-nav-tabs-trigger]',l);a(window).on('resize.tabs',t.debounce(o,150)).trigger('resize.tabs')};t.behaviors.navTabs={attach:function(t,n){var i=a(t).find('[data-drupal-nav-tabs]');if(i.length){var e=window.matchMedia('(min-width: 300px)');if(e.matches){i.once('nav-tabs').each(s)}}}}})(jQuery,Drupal);;
(function(){if(window.matchMedia&&window.matchMedia("all").addListener){return false}var e=window.matchMedia,i=e("only all").matches,n=false,t=0,a=[],r=function(i){clearTimeout(t);t=setTimeout(function(){for(var i=0,n=a.length;i<n;i++){var t=a[i].mql,r=a[i].listeners||[],o=e(t.media).matches;if(o!==t.matches){t.matches=o;for(var s=0,l=r.length;s<l;s++){r[s].call(window,t)}}}},30)};window.matchMedia=function(t){var o=e(t),s=[],l=0;o.addListener=function(e){if(!i){return}if(!n){n=true;window.addEventListener("resize",r,true)}if(l===0){l=a.push({mql:o,listeners:s})}s.push(e)};o.removeListener=function(e){for(var i=0,n=s.length;i<n;i++){if(s[i]===e){s.splice(i,1)}}};return o}})();
;
(function(a,t,l){'use strict';var o=t.url(l.path.currentPath);a.fn.drupalToolbarMenu=function(){var l={handleOpen:t.t('Extend'),handleClose:t.t('Collapse')};function s(t){var e=a(t.target),o=e.closest('li');n(o);var l=o.siblings().filter('.open');n(l,!1)};function c(a){if(!t.toolbar.models.toolbarModel.get('isFixed')){t.toolbar.models.toolbarModel.set('activeTab',null)};a.stopPropagation()};function n(a,t){var o=a.children('.toolbar-box').children('.toolbar-handle');t=(typeof t!=='undefined')?t:!a.hasClass('open');a.toggleClass('open',t);o.toggleClass('open',t);o.find('.action').text((t)?l.handleClose:l.handleOpen)};function r(o){var n={class:'toolbar-icon toolbar-handle',action:l.handleOpen,text:''};o.find('li > a').wrap('<div class="toolbar-box">');o.find('li').each(function(o,l){var e=a(l);if(e.children('ul.toolbar-menu').length){var i=e.children('.toolbar-box');n.text=t.t('@label',{'@label':i.find('a').text()});e.children('.toolbar-box').append(t.theme('toolbarMenuItemToggle',n))}})};function e(a,t){t=(!t)?1:t;var o=a.children('li').addClass('level-'+t);a=o.children('ul');if(a.length){e(a,t+1)}};function i(a){var t=a.find('a[href="'+location.pathname+'"]');if(t.length&&!o){o=location.pathname};if(o){var l=a.find('a[href="'+o+'"]').addClass('menu-item--active'),e=l.parentsUntil('.root','li').addClass('menu-item--active-trail');n(e,!0)}};return this.each(function(t){var o=a(this).once('toolbar-menu');if(o.length){o.on('click.toolbar','.toolbar-box',s).on('click.toolbar','.toolbar-box a',c);o.addClass('root');r(o);e(o);i(o)}})};t.theme.toolbarMenuItemToggle=function(a){return'<button class="'+a['class']+'"><span class="action">'+a.action+'</span><span class="label">'+a.text+'</span></button>'}}(jQuery,Drupal,drupalSettings));;
(function(e,o,a){'use strict';var t=e.extend({breakpoints:{'toolbar.narrow':'','toolbar.standard':'','toolbar.wide':''}},a.toolbar,{strings:{horizontal:o.t('Horizontal orientation'),vertical:o.t('Vertical orientation')}});o.behaviors.toolbar={attach:function(r){if(!window.matchMedia('only screen').matches){return};e(r).find('#toolbar-administration').once('toolbar').each(function(){var r=o.toolbar.models.toolbarModel=new o.toolbar.ToolbarModel({locked:JSON.parse(localStorage.getItem('Drupal.toolbar.trayVerticalLocked'))||!1,activeTab:document.getElementById(JSON.parse(localStorage.getItem('Drupal.toolbar.activeTabID')))});o.toolbar.views.toolbarVisualView=new o.toolbar.ToolbarVisualView({el:this,model:r,strings:t.strings});o.toolbar.views.toolbarAuralView=new o.toolbar.ToolbarAuralView({el:this,model:r,strings:t.strings});o.toolbar.views.bodyVisualView=new o.toolbar.BodyVisualView({el:this,model:r});var n=o.toolbar.models.menuModel=new o.toolbar.MenuModel();o.toolbar.views.menuVisualView=new o.toolbar.MenuVisualView({el:e(this).find('.toolbar-menu-administration').get(0),model:n,strings:t.strings});o.toolbar.setSubtrees.done(function(o){n.set('subtrees',o);var e=a.ajaxPageState.theme;localStorage.setItem('Drupal.toolbar.subtrees.'+e,JSON.stringify(o));r.set('areSubtreesLoaded',!0)});for(var l in t.breakpoints){if(t.breakpoints.hasOwnProperty(l)){var s=t.breakpoints[l],i=o.toolbar.mql[l]=window.matchMedia(s);i.addListener(o.toolbar.mediaQueryChangeHandler.bind(null,r,l));o.toolbar.mediaQueryChangeHandler.call(null,r,l,i)}};o.toolbar.views.toolbarVisualView.loadSubtrees();e(document).on('drupalViewportOffsetChange.toolbar',function(o,e){r.set('offsets',e)});r.on('change:orientation',function(o,t){e(document).trigger('drupalToolbarOrientationChange',t)}).on('change:activeTab',function(o,t){e(document).trigger('drupalToolbarTabChange',t)}).on('change:activeTray',function(o,t){e(document).trigger('drupalToolbarTrayChange',t)});if(o.toolbar.models.toolbarModel.get('orientation')==='horizontal'&&o.toolbar.models.toolbarModel.get('activeTab')===null){o.toolbar.models.toolbarModel.set({activeTab:e('.toolbar-bar .toolbar-tab:not(.home-toolbar-tab) a').get(0)})}})}};o.toolbar={views:{},models:{},mql:{},setSubtrees:new e.Deferred(),mediaQueryChangeHandler:function(o,t,e){switch(t){case'toolbar.narrow':o.set({isOriented:e.matches,isTrayToggleVisible:!1});if(!e.matches||!o.get('orientation')){o.set({orientation:'vertical'},{validate:!0})};break;case'toolbar.standard':o.set({isFixed:e.matches});break;case'toolbar.wide':o.set({orientation:((e.matches)?'horizontal':'vertical')},{validate:!0});o.set({isTrayToggleVisible:e.matches});break;default:break}}};o.theme.toolbarOrientationToggle=function(){return'<div class="toolbar-toggle-orientation"><div class="toolbar-lining"><button class="toolbar-icon" type="button"></button></div></div>'};o.AjaxCommands.prototype.setToolbarSubtrees=function(e,t,a){o.toolbar.setSubtrees.resolve(t.subtrees)}}(jQuery,Drupal,drupalSettings));;
(function(t,e){'use strict';e.toolbar.MenuModel=t.Model.extend({defaults:{subtrees:{}}})}(Backbone,Drupal));;
(function(t,e){'use strict';e.toolbar.ToolbarModel=t.Model.extend({defaults:{activeTab:null,activeTray:null,isOriented:!1,isFixed:!1,areSubtreesLoaded:!1,isViewportOverflowConstrained:!1,orientation:'vertical',locked:!1,isTrayToggleVisible:!1,height:null,offsets:{top:0,right:0,bottom:0,left:0}},validate:function(o,t){if(o.orientation==='horizontal'&&this.get('locked')&&!t.override){return e.t('The toolbar cannot be set to a horizontal orientation when it is locked.')}}})}(Backbone,Drupal));;
(function(o,t,e){'use strict';t.toolbar.BodyVisualView=e.View.extend({initialize:function(){this.listenTo(this.model,'change:orientation change:offsets change:activeTray change:isOriented change:isFixed change:isViewportOverflowConstrained',this.render)},render:function(){var s=o('body'),e=this.model.get('orientation'),i=this.model.get('isOriented'),t=this.model.get('isViewportOverflowConstrained');s.toggleClass('toolbar-vertical',(e==='vertical')).toggleClass('toolbar-horizontal',(i&&e==='horizontal')).toggleClass('toolbar-fixed',(t||this.model.get('isFixed'))).toggleClass('toolbar-tray-open',!!this.model.get('activeTray')).css('padding-top',this.model.get('offsets').top)}})}(jQuery,Drupal,Backbone));;
(function(r,i,e){'use strict';e.toolbar.MenuVisualView=i.View.extend({initialize:function(){this.listenTo(this.model,'change:subtrees',this.render)},render:function(){var e=this.model.get('subtrees');for(var i in e){if(e.hasOwnProperty(i)){this.$el.find('#toolbar-link-'+i).once('toolbar-subtrees').after(e[i])}};if('drupalToolbarMenu' in r.fn){this.$el.children('.toolbar-menu').drupalToolbarMenu()}}})}(jQuery,Backbone,Drupal));;
(function(t,n){'use strict';n.toolbar.ToolbarAuralView=t.View.extend({initialize:function(n){this.strings=n.strings;this.listenTo(this.model,'change:orientation',this.onOrientationChange);this.listenTo(this.model,'change:activeTray',this.onActiveTrayChange)},onOrientationChange:function(i,t){n.announce(n.t('Tray orientation changed to @orientation.',{'@orientation':t}))},onActiveTrayChange:function(i,t){var r=(t===null)?i.previous('activeTray'):t,a=(t===null)?n.t('closed'):n.t('opened'),o=r.querySelector('.toolbar-tray-name'),e;if(o!==null){e=n.t('Tray "@tray" @action.',{'@tray':o.textContent,'@action':a})}
else{e=n.t('Tray @action.',{'@action':a})};n.announce(e)}})}(Backbone,Drupal));;
(function(t,e,a,o){'use strict';e.toolbar.ToolbarVisualView=o.View.extend({events:function(){var t=function(t){t.preventDefault();t.target.click()};return{'click .toolbar-bar .toolbar-tab .trigger':'onTabClick','click .toolbar-toggle-orientation button':'onOrientationToggleClick','touchend .toolbar-bar .toolbar-tab .trigger':t,'touchend .toolbar-toggle-orientation button':t}},initialize:function(t){this.strings=t.strings;this.listenTo(this.model,'change:activeTab change:orientation change:isOriented change:isTrayToggleVisible',this.render);this.listenTo(this.model,'change:mqMatches',this.onMediaQueryChange);this.listenTo(this.model,'change:offsets',this.adjustPlacement);this.$el.find('.toolbar-tray .toolbar-lining').append(e.theme('toolbarOrientationToggle'));this.model.trigger('change:activeTab')},render:function(){this.updateTabs();this.updateTrayOrientation();this.updateBarAttributes();if(this.model.changed.orientation==='vertical'||this.model.changed.activeTab){this.loadSubtrees()};window.setTimeout(function(){e.displace(!0)},0);return this},onTabClick:function(t){if(t.target.hasAttribute('data-toolbar-tray')){var a=this.model.get('activeTab'),e=t.target;this.model.set('activeTab',(!a||e!==a)?e:null);t.preventDefault();t.stopPropagation()}},onOrientationToggleClick:function(t){var o=this.model.get('orientation'),e=(o==='vertical')?'horizontal':'vertical',a=e==='vertical';if(a){localStorage.setItem('Drupal.toolbar.trayVerticalLocked','true')}
else{localStorage.removeItem('Drupal.toolbar.trayVerticalLocked')};this.model.set({locked:a,orientation:e},{validate:!0,override:!0});t.preventDefault();t.stopPropagation()},updateTabs:function(){var e=t(this.model.get('activeTab'));t(this.model.previous('activeTab')).removeClass('is-active').prop('aria-pressed',!1);t(this.model.previous('activeTray')).removeClass('is-active');if(e.length>0){e.addClass('is-active').prop('aria-pressed',!0);var r=e.attr('data-toolbar-tray'),o=e.get(0).id;if(o){localStorage.setItem('Drupal.toolbar.activeTabID',JSON.stringify(o))};var a=this.$el.find('[data-toolbar-tray="'+r+'"].toolbar-tray');if(a.length){a.addClass('is-active');this.model.set('activeTray',a.get(0))}
else{this.model.set('activeTray',null)}}
else{this.model.set('activeTray',null);localStorage.removeItem('Drupal.toolbar.activeTabID')}},updateBarAttributes:function(){var t=this.model.get('isOriented');if(t){this.$el.find('.toolbar-bar').attr('data-offset-top','')}
else{this.$el.find('.toolbar-bar').removeAttr('data-offset-top')};this.$el.toggleClass('toolbar-oriented',t)},updateTrayOrientation:function(){var e=this.model.get('orientation'),t=(e==='vertical')?'horizontal':'vertical',a=this.$el.find('.toolbar-tray').removeClass('toolbar-tray-horizontal toolbar-tray-vertical').addClass('toolbar-tray-'+e),i='toolbar-icon-toggle-'+e,r='toolbar-icon-toggle-'+t,o=this.$el.find('.toolbar-toggle-orientation').toggle(this.model.get('isTrayToggleVisible'));o.find('button').val(t).attr('title',this.strings[t]).text(this.strings[t]).removeClass(i).addClass(r);var s=document.documentElement.dir,l=(s==='rtl')?'right':'left';a.removeAttr('data-offset-left data-offset-right data-offset-top');a.filter('.toolbar-tray-vertical.is-active').attr('data-offset-'+l,'');a.filter('.toolbar-tray-horizontal.is-active').attr('data-offset-top','')},adjustPlacement:function(){var t=this.$el.find('.toolbar-tray');if(!this.model.get('isOriented')){t.css('margin-top',0);t.removeClass('toolbar-tray-horizontal').addClass('toolbar-tray-vertical')}
else{t.css('margin-top',this.$el.find('.toolbar-bar').outerHeight())}},loadSubtrees:function(){var n=t(this.model.get('activeTab')),s=this.model.get('orientation');if(!this.model.get('areSubtreesLoaded')&&typeof n.data('drupal-subtrees')!=='undefined'&&s==='vertical'){var r=a.toolbar.subtreesHash,o=a.ajaxPageState.theme,c=e.url('toolbar/subtrees/'+r),d=localStorage.getItem('Drupal.toolbar.subtreesHash.'+o),l=JSON.parse(localStorage.getItem('Drupal.toolbar.subtrees.'+o)),i=this.model.get('orientation')==='vertical';if(i&&r===d&&l){e.toolbar.setSubtrees.resolve(l)}
else if(i){localStorage.removeItem('Drupal.toolbar.subtreesHash.'+o);localStorage.removeItem('Drupal.toolbar.subtrees.'+o);e.ajax({url:c}).execute();localStorage.setItem('Drupal.toolbar.subtreesHash.'+o,r)}}}})}(jQuery,Drupal,drupalSettings,Backbone));;
(function(t,e){'use strict';function i(){this.stack=[]};t.extend(i.prototype,{constrain:function(e){var r=this.stack.length;for(var n=0;n<r;n++){this.stack[n].deactivate()};var s=t(e).find(':tabbable').addBack(':tabbable'),i=new a({level:this.stack.length,$tabbableElements:s});this.stack.push(i);i.activate();t(document).trigger('drupalTabbingConstrained',i);return i},release:function(){var t=this.stack.length-1;while(t>=0&&this.stack[t].released){t--};this.stack.splice(t+1);if(t>=0){this.stack[t].activate()}},activate:function(e){var i=e.$tabbableElements,l=e.level,a=t(':tabbable').not(i);e.$disabledElements=a;var s=a.length;for(var n=0;n<s;n++){this.recordTabindex(a.eq(n),l)};a.prop('tabindex',-1).prop('autofocus',!1);var r=i.filter('[autofocus]').eq(-1);if(r.length===0){r=i.eq(0)};r.trigger('focus')},deactivate:function(t){var a=t.$disabledElements,n=t.level,i=a.length;for(var e=0;e<i;e++){this.restoreTabindex(a.eq(e),n)}},recordTabindex:function(t,e){var a=t.data('drupalOriginalTabIndices')||{};a[e]={tabindex:t[0].getAttribute('tabindex'),autofocus:t[0].hasAttribute('autofocus')};t.data('drupalOriginalTabIndices',a)},restoreTabindex:function(t,e){var a=t.data('drupalOriginalTabIndices');if(a&&a[e]){var n=a[e];if(n.tabindex){t[0].setAttribute('tabindex',n.tabindex)}
else{t[0].removeAttribute('tabindex')};if(n.autofocus){t[0].setAttribute('autofocus','autofocus')};if(e===0){t.removeData('drupalOriginalTabIndices')}
else{var i=e;while(a.hasOwnProperty(i)){delete a[i];i++};t.data('drupalOriginalTabIndices',a)}}}});function a(e){t.extend(this,{level:null,$tabbableElements:t(),$disabledElements:t(),released:!1,active:!1},e)};t.extend(a.prototype,{release:function(){if(!this.released){this.deactivate();this.released=!0;e.tabbingManager.release(this);t(document).trigger('drupalTabbingContextReleased',this)}},activate:function(){if(!this.active&&!this.released){this.active=!0;e.tabbingManager.activate(this);t(document).trigger('drupalTabbingContextActivated',this)}},deactivate:function(){if(this.active){this.active=!1;e.tabbingManager.deactivate(this);t(document).trigger('drupalTabbingContextDeactivated',this)}}});if(e.tabbingManager){return};e.tabbingManager=new i()}(jQuery,Drupal));;
(function(o,t,a){'use strict';var e={tabbingReleased:t.t('Tabbing is no longer constrained by the Contextual module.'),tabbingConstrained:t.t('Tabbing is constrained to a set of @contextualsCount and the edit mode toggle.'),pressEsc:t.t('Press the esc key to exit.')};function n(l){if(!t.contextual||!t.contextual.collection){return};var n=t.contextualToolbar,i=n.model=new n.StateModel({isViewing:localStorage.getItem('Drupal.contextualToolbar.isViewing')!=='false'},{contextualCollection:t.contextual.collection});var a={el:o('.toolbar .toolbar-bar .contextual-toolbar-tab'),model:i,strings:e};new n.VisualView(a);new n.AuralView(a)};t.behaviors.contextualToolbar={attach:function(t){if(o('body').once('contextualToolbar-init').length){n(t)}}};t.contextualToolbar={model:null}})(jQuery,Drupal,Backbone);;
(function(t,i){'use strict';t.contextualToolbar.StateModel=i.Model.extend({defaults:{isViewing:!0,isVisible:!1,contextualCount:0,tabbingContext:null},initialize:function(i,t){this.listenTo(t.contextualCollection,'reset remove add',this.countContextualLinks);this.listenTo(t.contextualCollection,'add',this.lockNewContextualLinks);this.listenTo(this,'change:contextualCount',this.updateVisibility);this.listenTo(this,'change:isViewing',function(n,i){t.contextualCollection.each(function(t){t.set('isLocked',!i)})})},countContextualLinks:function(i,t){this.set('contextualCount',t.length)},lockNewContextualLinks:function(t,i){if(!this.get('isViewing')){t.set('isLocked',!0)}},updateVisibility:function(){this.set('isVisible',this.get('contextualCount')>0)}})})(Drupal,Backbone);;
(function(t,n,i,e){'use strict';n.contextualToolbar.AuralView=i.View.extend({announcedOnce:!1,initialize:function(n){this.options=n;this.listenTo(this.model,'change',this.render);this.listenTo(this.model,'change:isViewing',this.manageTabbing);t(document).on('keyup',e.bind(this.onKeypress,this))},render:function(){this.$el.find('button').attr('aria-pressed',!this.model.get('isViewing'));return this},manageTabbing:function(){var e=this.model.get('tabbingContext');if(e){e.release();n.announce(this.options.strings.tabbingReleased)};if(!this.model.get('isViewing')){e=n.tabbingManager.constrain(t('.contextual-toolbar-tab, .contextual'));this.model.set('tabbingContext',e);this.announceTabbingConstraint();this.announcedOnce=!0}},announceTabbingConstraint:function(){var t=this.options.strings;n.announce(n.formatString(t.tabbingConstrained,{'@contextualsCount':n.formatPlural(n.contextual.collection.length,'@count contextual link','@count contextual links')}));n.announce(t.pressEsc)},onKeypress:function(n){if(!this.announcedOnce&&n.keyCode===9&&!this.model.get('isViewing')){this.announceTabbingConstraint();this.announcedOnce=!0};if(n.keyCode===27){this.model.set('isViewing',!0)}}})})(jQuery,Drupal,Backbone,_);;
(function(e,i){'use strict';e.contextualToolbar.VisualView=i.View.extend({events:function(){var e=function(e){e.preventDefault();e.target.click()};return{click:function(){this.model.set('isViewing',!this.model.get('isViewing'))},touchend:e}},initialize:function(){this.listenTo(this.model,'change',this.render);this.listenTo(this.model,'change:isViewing',this.persist)},render:function(){this.$el.toggleClass('hidden',!this.model.get('isVisible'));this.$el.find('button').toggleClass('is-active',!this.model.get('isViewing'));return this},persist:function(i,e){if(!e){localStorage.setItem('Drupal.contextualToolbar.isViewing','false')}
else{localStorage.removeItem('Drupal.contextualToolbar.isViewing')}}})})(Drupal,Backbone);;
/* jQuery Foundation Joyride Plugin 2.1 | Copyright 2012, ZURB | www.opensource.org/licenses/mit-license.php */
(function(e,t,n){"use strict";var r={version:"2.0.3",tipLocation:"bottom",nubPosition:"auto",scroll:!0,scrollSpeed:300,timer:0,autoStart:!1,startTimerOnClick:!0,startOffset:0,nextButton:!0,tipAnimation:"fade",pauseAfter:[],tipAnimationFadeSpeed:300,cookieMonster:!1,cookieName:"joyride",cookieDomain:!1,cookiePath:!1,localStorage:!1,localStorageKey:"joyride",tipContainer:"body",modal:!1,expose:!1,postExposeCallback:e.noop,preRideCallback:e.noop,postRideCallback:e.noop,preStepCallback:e.noop,postStepCallback:e.noop,template:{link:'<a href="#close" class="joyride-close-tip">X</a>',timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"></span></div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"></span></div>',wrapper:'<div class="joyride-content-wrapper" role="dialog"></div>',button:'<a href="#" class="joyride-next-tip"></a>',modal:'<div class="joyride-modal-bg"></div>',expose:'<div class="joyride-expose-wrapper"></div>',exposeCover:'<div class="joyride-expose-cover"></div>'}},i=i||!1,s={},o={init:function(n){return this.each(function(){e.isEmptyObject(s)?(s=e.extend(!0,r,n),s.document=t.document,s.$document=e(s.document),s.$window=e(t),s.$content_el=e(this),s.$body=e(s.tipContainer),s.body_offset=e(s.tipContainer).position(),s.$tip_content=e("> li",s.$content_el),s.paused=!1,s.attempts=0,s.tipLocationPatterns={top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]},o.jquery_check(),e.isFunction(e.cookie)||(s.cookieMonster=!1),(!s.cookieMonster||!e.cookie(s.cookieName))&&(!s.localStorage||!o.support_localstorage()||!localStorage.getItem(s.localStorageKey))&&(s.$tip_content.each(function(t){o.create({$li:e(this),index:t})}),s.autoStart&&(!s.startTimerOnClick&&s.timer>0?(o.show("init"),o.startTimer()):o.show("init"))),s.$document.on("click.joyride",".joyride-next-tip, .joyride-modal-bg",function(e){e.preventDefault(),s.$li.next().length<1?o.end():s.timer>0?(clearTimeout(s.automate),o.hide(),o.show(),o.startTimer()):(o.hide(),o.show())}),s.$document.on("click.joyride",".joyride-close-tip",function(e){e.preventDefault(),o.end()}),s.$window.bind("resize.joyride",function(t){if(s.$li){if(s.exposed&&s.exposed.length>0){var n=e(s.exposed);n.each(function(){var t=e(this);o.un_expose(t),o.expose(t)})}o.is_phone()?o.pos_phone():o.pos_default()}})):o.restart()})},resume:function(){o.set_li(),o.show()},nextTip:function(){s.$li.next().length<1?o.end():s.timer>0?(clearTimeout(s.automate),o.hide(),o.show(),o.startTimer()):(o.hide(),o.show())},tip_template:function(t){var n,r,i;return t.tip_class=t.tip_class||"",n=e(s.template.tip).addClass(t.tip_class),r=e.trim(e(t.li).html())+o.button_text(t.button_text)+s.template.link+o.timer_instance(t.index),i=e(s.template.wrapper),t.li.attr("data-aria-labelledby")&&i.attr("aria-labelledby",t.li.attr("data-aria-labelledby")),t.li.attr("data-aria-describedby")&&i.attr("aria-describedby",t.li.attr("data-aria-describedby")),n.append(i),n.first().attr("data-index",t.index),e(".joyride-content-wrapper",n).append(r),n[0]},timer_instance:function(t){var n;return t===0&&s.startTimerOnClick&&s.timer>0||s.timer===0?n="":n=o.outerHTML(e(s.template.timer)[0]),n},button_text:function(t){return s.nextButton?(t=e.trim(t)||"Next",t=o.outerHTML(e(s.template.button).append(t)[0])):t="",t},create:function(t){var n=t.$li.attr("data-button")||t.$li.attr("data-text"),r=t.$li.attr("class"),i=e(o.tip_template({tip_class:r,index:t.index,button_text:n,li:t.$li}));e(s.tipContainer).append(i)},show:function(t){var r={},i,u=[],a=0,f,l=null;if(s.$li===n||e.inArray(s.$li.index(),s.pauseAfter)===-1){s.paused?s.paused=!1:o.set_li(t),s.attempts=0;if(s.$li.length&&s.$target.length>0){t&&(s.preRideCallback(s.$li.index(),s.$next_tip),s.modal&&o.show_modal()),s.preStepCallback(s.$li.index(),s.$next_tip),u=(s.$li.data("options")||":").split(";"),a=u.length;for(i=a-1;i>=0;i--)f=u[i].split(":"),f.length===2&&(r[e.trim(f[0])]=e.trim(f[1]));s.tipSettings=e.extend({},s,r),s.tipSettings.tipLocationPattern=s.tipLocationPatterns[s.tipSettings.tipLocation],s.modal&&s.expose&&o.expose(),!/body/i.test(s.$target.selector)&&s.scroll&&o.scroll_to(),o.is_phone()?o.pos_phone(!0):o.pos_default(!0),l=e(".joyride-timer-indicator",s.$next_tip),/pop/i.test(s.tipAnimation)?(l.outerWidth(0),s.timer>0?(s.$next_tip.show(),l.animate({width:e(".joyride-timer-indicator-wrap",s.$next_tip).outerWidth()},s.timer)):s.$next_tip.show()):/fade/i.test(s.tipAnimation)&&(l.outerWidth(0),s.timer>0?(s.$next_tip.fadeIn(s.tipAnimationFadeSpeed),s.$next_tip.show(),l.animate({width:e(".joyride-timer-indicator-wrap",s.$next_tip).outerWidth()},s.timer)):s.$next_tip.fadeIn(s.tipAnimationFadeSpeed)),s.$current_tip=s.$next_tip,e(".joyride-next-tip",s.$current_tip).focus(),o.tabbable(s.$current_tip)}else s.$li&&s.$target.length<1?o.show():o.end()}else s.paused=!0},is_phone:function(){return i?i.mq("only screen and (max-width: 767px)"):s.$window.width()<767?!0:!1},support_localstorage:function(){return i?i.localstorage:!!t.localStorage},hide:function(){s.modal&&s.expose&&o.un_expose(),s.modal||e(".joyride-modal-bg").hide(),s.$current_tip.hide(),s.postStepCallback(s.$li.index(),s.$current_tip)},set_li:function(e){e?(s.$li=s.$tip_content.eq(s.startOffset),o.set_next_tip(),s.$current_tip=s.$next_tip):(s.$li=s.$li.next(),o.set_next_tip()),o.set_target()},set_next_tip:function(){s.$next_tip=e(".joyride-tip-guide[data-index="+s.$li.index()+"]")},set_target:function(){var t=s.$li.attr("data-class"),n=s.$li.attr("data-id"),r=function(){return n?e(s.document.getElementById(n)):t?e("."+t).filter(":visible").first():e("body")};s.$target=r()},scroll_to:function(){var t,n;t=s.$window.height()/2,n=Math.ceil(s.$target.offset().top-t+s.$next_tip.outerHeight()),e("html, body").stop().animate({scrollTop:n},s.scrollSpeed)},paused:function(){return e.inArray(s.$li.index()+1,s.pauseAfter)===-1?!0:!1},destroy:function(){e.isEmptyObject(s)||s.$document.off(".joyride"),e(t).off(".joyride"),e(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride"),e(".joyride-tip-guide, .joyride-modal-bg").remove(),clearTimeout(s.automate),s={}},restart:function(){s.autoStart?(o.hide(),s.$li=n,o.show("init")):(!s.startTimerOnClick&&s.timer>0?(o.show("init"),o.startTimer()):o.show("init"),s.autoStart=!0)},pos_default:function(t){var n=Math.ceil(s.$window.height()/2),r=s.$next_tip.offset(),i=e(".joyride-nub",s.$next_tip),u=Math.ceil(i.outerWidth()/2),a=Math.ceil(i.outerHeight()/2),f=t||!1;f&&(s.$next_tip.css("visibility","hidden"),s.$next_tip.show());if(!/body/i.test(s.$target.selector)){var l=s.tipSettings.tipAdjustmentY?parseInt(s.tipSettings.tipAdjustmentY):0,c=s.tipSettings.tipAdjustmentX?parseInt(s.tipSettings.tipAdjustmentX):0;o.bottom()?(s.$next_tip.css({top:s.$target.offset().top+a+s.$target.outerHeight()+l,left:s.$target.offset().left+c}),/right/i.test(s.tipSettings.nubPosition)&&s.$next_tip.css("left",s.$target.offset().left-s.$next_tip.outerWidth()+s.$target.outerWidth()),o.nub_position(i,s.tipSettings.nubPosition,"top")):o.top()?(s.$next_tip.css({top:s.$target.offset().top-s.$next_tip.outerHeight()-a+l,left:s.$target.offset().left+c}),o.nub_position(i,s.tipSettings.nubPosition,"bottom")):o.right()?(s.$next_tip.css({top:s.$target.offset().top+l,left:s.$target.outerWidth()+s.$target.offset().left+u+c}),o.nub_position(i,s.tipSettings.nubPosition,"left")):o.left()&&(s.$next_tip.css({top:s.$target.offset().top+l,left:s.$target.offset().left-s.$next_tip.outerWidth()-u+c}),o.nub_position(i,s.tipSettings.nubPosition,"right")),!o.visible(o.corners(s.$next_tip))&&s.attempts<s.tipSettings.tipLocationPattern.length&&(i.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),s.tipSettings.tipLocation=s.tipSettings.tipLocationPattern[s.attempts],s.attempts++,o.pos_default(!0))}else s.$li.length&&o.pos_modal(i);f&&(s.$next_tip.hide(),s.$next_tip.css("visibility","visible"))},pos_phone:function(t){var n=s.$next_tip.outerHeight(),r=s.$next_tip.offset(),i=s.$target.outerHeight(),u=e(".joyride-nub",s.$next_tip),a=Math.ceil(u.outerHeight()/2),f=t||!1;u.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),f&&(s.$next_tip.css("visibility","hidden"),s.$next_tip.show()),/body/i.test(s.$target.selector)?s.$li.length&&o.pos_modal(u):o.top()?(s.$next_tip.offset({top:s.$target.offset().top-n-a}),u.addClass("bottom")):(s.$next_tip.offset({top:s.$target.offset().top+i+a}),u.addClass("top")),f&&(s.$next_tip.hide(),s.$next_tip.css("visibility","visible"))},pos_modal:function(e){o.center(),e.hide(),o.show_modal()},show_modal:function(){e(".joyride-modal-bg").length<1&&e("body").append(s.template.modal).show(),/pop/i.test(s.tipAnimation)?e(".joyride-modal-bg").show():e(".joyride-modal-bg").fadeIn(s.tipAnimationFadeSpeed)},expose:function(){var n,r,i,u,a="expose-"+Math.floor(Math.random()*1e4);if(arguments.length>0&&arguments[0]instanceof e)i=arguments[0];else{if(!s.$target||!!/body/i.test(s.$target.selector))return!1;i=s.$target}if(i.length<1)return t.console&&console.error("element not valid",i),!1;n=e(s.template.expose),s.$body.append(n),n.css({top:i.offset().top,left:i.offset().left,width:i.outerWidth(!0),height:i.outerHeight(!0)}),r=e(s.template.exposeCover),u={zIndex:i.css("z-index"),position:i.css("position")},i.css("z-index",n.css("z-index")*1+1),u.position=="static"&&i.css("position","relative"),i.data("expose-css",u),r.css({top:i.offset().top,left:i.offset().left,width:i.outerWidth(!0),height:i.outerHeight(!0)}),s.$body.append(r),n.addClass(a),r.addClass(a),s.tipSettings.exposeClass&&(n.addClass(s.tipSettings.exposeClass),r.addClass(s.tipSettings.exposeClass)),i.data("expose",a),s.postExposeCallback(s.$li.index(),s.$next_tip,i),o.add_exposed(i)},un_expose:function(){var n,r,i,u,a=!1;if(arguments.length>0&&arguments[0]instanceof e)r=arguments[0];else{if(!s.$target||!!/body/i.test(s.$target.selector))return!1;r=s.$target}if(r.length<1)return t.console&&console.error("element not valid",r),!1;n=r.data("expose"),i=e("."+n),arguments.length>1&&(a=arguments[1]),a===!0?e(".joyride-expose-wrapper,.joyride-expose-cover").remove():i.remove(),u=r.data("expose-css"),u.zIndex=="auto"?r.css("z-index",""):r.css("z-index",u.zIndex),u.position!=r.css("position")&&(u.position=="static"?r.css("position",""):r.css("position",u.position)),r.removeData("expose"),r.removeData("expose-z-index"),o.remove_exposed(r)},add_exposed:function(t){s.exposed=s.exposed||[],t instanceof e?s.exposed.push(t[0]):typeof t=="string"&&s.exposed.push(t)},remove_exposed:function(t){var n;t instanceof e?n=t[0]:typeof t=="string"&&(n=t),s.exposed=s.exposed||[];for(var r=0;r<s.exposed.length;r++)if(s.exposed[r]==n){s.exposed.splice(r,1);return}},center:function(){var e=s.$window;return s.$next_tip.css({top:(e.height()-s.$next_tip.outerHeight())/2+e.scrollTop(),left:(e.width()-s.$next_tip.outerWidth())/2+e.scrollLeft()}),!0},bottom:function(){return/bottom/i.test(s.tipSettings.tipLocation)},top:function(){return/top/i.test(s.tipSettings.tipLocation)},right:function(){return/right/i.test(s.tipSettings.tipLocation)},left:function(){return/left/i.test(s.tipSettings.tipLocation)},corners:function(e){var t=s.$window,n=t.height()/2,r=Math.ceil(s.$target.offset().top-n+s.$next_tip.outerHeight()),i=t.width()+t.scrollLeft(),o=t.height()+r,u=t.height()+t.scrollTop(),a=t.scrollTop();return r<a&&(r<0?a=0:a=r),o>u&&(u=o),[e.offset().top<a,i<e.offset().left+e.outerWidth(),u<e.offset().top+e.outerHeight(),t.scrollLeft()>e.offset().left]},visible:function(e){var t=e.length;while(t--)if(e[t])return!1;return!0},nub_position:function(e,t,n){t==="auto"?e.addClass(n):e.addClass(t)},startTimer:function(){s.$li.length?s.automate=setTimeout(function(){o.hide(),o.show(),o.startTimer()},s.timer):clearTimeout(s.automate)},end:function(){s.cookieMonster&&e.cookie(s.cookieName,"ridden",{expires:365,domain:s.cookieDomain,path:s.cookiePath}),s.localStorage&&localStorage.setItem(s.localStorageKey,!0),s.timer>0&&clearTimeout(s.automate),s.modal&&s.expose&&o.un_expose(),s.$current_tip&&s.$current_tip.hide(),s.$li&&(s.postStepCallback(s.$li.index(),s.$current_tip),s.postRideCallback(s.$li.index(),s.$current_tip)),e(".joyride-modal-bg").hide()},jquery_check:function(){return e.isFunction(e.fn.on)?!0:(e.fn.on=function(e,t,n){return this.delegate(t,e,n)},e.fn.off=function(e,t,n){return this.undelegate(t,e,n)},!1)},outerHTML:function(e){return e.outerHTML||(new XMLSerializer).serializeToString(e)},version:function(){return s.version},tabbable:function(t){e(t).on("keydown",function(n){if(!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===27){n.preventDefault(),o.end();return}if(n.keyCode!==9)return;var r=e(t).find(":tabbable"),i=r.filter(":first"),s=r.filter(":last");n.target===s[0]&&!n.shiftKey?(i.focus(1),n.preventDefault()):n.target===i[0]&&n.shiftKey&&(s.focus(1),n.preventDefault())})}};e.fn.joyride=function(t){if(o[t])return o[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return o.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.joyride")}})(jQuery,this);
;
(function(t,i,e,r){'use strict';var o=decodeURI(window.location.search);e.behaviors.tour={attach:function(i){t('body').once('tour').each(function(){var s=new e.tour.models.StateModel();new e.tour.views.ToggleTourView({el:t(i).find('#toolbar-tab-tour'),model:s});s.on('change:isActive',function(e,i){t(r).trigger((i)?'drupalTourStarted':'drupalTourStopped')}).set('tour',t(i).find('ol#tour'));if(/tour=?/i.test(o)){s.set('isActive',!0)}})}};e.tour=e.tour||{models:{},views:{}};e.tour.models.StateModel=i.Model.extend({defaults:{tour:[],isActive:!1,activeTour:[]}});e.tour.views.ToggleTourView=i.View.extend({events:{click:'onClick'},initialize:function(){this.listenTo(this.model,'change:tour change:isActive',this.render);this.listenTo(this.model,'change:isActive',this.toggleTour)},render:function(){this.$el.toggleClass('hidden',this._getTour().length===0);var t=this.model.get('isActive');this.$el.find('button').toggleClass('is-active',t).prop('aria-pressed',t);return this},toggleTour:function(){if(this.model.get('isActive')){var t=this._getTour();this._removeIrrelevantTourItems(t,this._getDocument());var e=this;if(t.find('li').length){t.joyride({autoStart:!0,postRideCallback:function(){e.model.set('isActive',!1)},template:{link:'<a href="#close" class="joyride-close-tip">&times;</a>',button:'<a href="#" class="button button--primary joyride-next-tip"></a>'}});this.model.set({isActive:!0,activeTour:t})}}
else{this.model.get('activeTour').joyride('destroy');this.model.set({isActive:!1,activeTour:[]})}},onClick:function(t){this.model.set('isActive',!this.model.get('isActive'));t.preventDefault();t.stopPropagation()},_getTour:function(){return this.model.get('tour')},_getDocument:function(){return t(r)},_removeIrrelevantTourItems:function(i,r){var s=!1,n=/tips=([^&]+)/.exec(o);i.find('li').each(function(){var e=t(this),o=e.attr('data-id'),i=e.attr('data-class');if(n&&!t(this).hasClass(n[1])){s=!0;e.remove();return};if((!o&&!i)||(o&&r.find('#'+o).length)||(i&&r.find('.'+i).length)){return};s=!0;e.remove()});if(s){var a=i.find('li').length;if(!a){this.model.set({tour:[]})};i.find('li').each(function(i){var o=e.t('!tour_item of !total',{'!tour_item':i+1,'!total':a});t(this).find('.tour-progress').text(o)}).eq(-1).attr('data-text',e.t('End tour'))}}})})(jQuery,Backbone,Drupal,document);;
(function(t){t(document).ready(function(){t('a.toolbar-icon').removeAttr('title')})})(jQuery);;
(function(i,a,n){'use strict';var e=n.path,s=sessionStorage.getItem('escapeAdminPath'),t=window.location;if(!e.currentPathIsAdmin&&!/destination=/.test(t.search)){sessionStorage.setItem('escapeAdminPath',t)};a.behaviors.escapeAdmin={attach:function(){var t=i('[data-toolbar-escape-admin]').once('escapeAdmin');if(t.length&&e.currentPathIsAdmin){if(s!==null){t.attr('href',s)}
else{t.text(a.t('Home'))};t.closest('.toolbar-tab').removeClass('hidden')}}}})(jQuery,Drupal,drupalSettings);;
